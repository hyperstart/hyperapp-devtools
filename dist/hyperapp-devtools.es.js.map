{"version":3,"file":"hyperapp-devtools.es.js","sources":["../src/utils.ts","../node_modules/hyperapp/src/index.js","../node_modules/style-inject/dist/style-inject.es.js","../src/selectors.ts","../src/valueDisplay.ts","../src/components/DebuggerOptions.tsx","../src/components/Icon.tsx","../src/components/DebugPaneToolbar.tsx","../src/components/ObjectView.js","../src/components/ObjectDetailsPane.tsx","../src/components/RunEvent.tsx","../src/components/RunEventList.tsx","../src/components/RunsPaneItem.tsx","../src/components/RunsPane.tsx","../src/components/DebugPaneContent.tsx","../src/components/DebugPane.tsx","../src/components/TogglePaneButton.tsx","../src/view.tsx","../src/state.ts","../node_modules/tslib/tslib.es6.js","../src/actions/deleteRun.ts","../src/immutable.ts","../src/debuggedFunctions.ts","../src/actions/execute.ts","../src/actions/logCallEnd.ts","../src/actions/logCallStart.ts","../src/actions/logInit.ts","../src/actions/logMessage.ts","../src/actions/select.ts","../src/actions/setDetailsPaneExpanded.ts","../src/actions/setPaneDisplay.ts","../src/actions/setValueDisplay.ts","../src/actions/showPane.ts","../src/api.ts","../src/actions/timeTravel.ts","../src/actions/toggleCollapseRepeatingEvents.ts","../src/actions/toggleEvent.ts","../src/actions/toggleRun.ts","../src/enhanceActions.ts","../src/devtools.ts","../src/debug.ts"],"sourcesContent":["const ALPHABET =\n  \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"\nconst SIZE = 16\nconst rand = () => ALPHABET[Math.floor(Math.random() * ALPHABET.length)]\n\nexport const guid = () =>\n  Array.apply(null, Array(SIZE))\n    .map(rand)\n    .join(\"\")\n\nexport function truncate(value: string, maxLength: number = 30): string {\n  if (value.length <= maxLength) {\n    return value\n  }\n  return value.substr(0, maxLength - 2) + \"...\"\n}\n","export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null ? node : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function set(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1 ? set(path.slice(1), value, source[path[0]]) : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function get(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(get(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = get(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = set(path, clone(state, result), globalState))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      for (var i in clone(oldValue, value)) {\n        var style = value == null || value[i] == null ? \"\" : value[i]\n        if (i[0] === \"-\") {\n          element[name].setProperty(i, style)\n        } else {\n          element[name][i] = style\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (name in element && name !== \"list\" && !isSvg) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { AppEvent, State, Run, SelectedEvent } from \"./api\"\nimport { get, Path } from \"./immutable\"\n\nexport function isValueDisplayExpanded(state: State, path: string): boolean {\n  const expanded = state.detailsPaneExpandedPaths[path]\n  if (typeof expanded === \"boolean\") {\n    return expanded\n  }\n  return path.split(\".\").length < 4\n}\n\nexport function getLatestRunId(state: State): string {\n  const runs = state.runs\n  if (runs.length > 0) {\n    return runs[runs.length - 1]\n  }\n  throw new Error(\"No run found.\")\n}\n\nexport function getRun(state: State, runId: string): Run {\n  const run = state.runsById[runId]\n  if (!run) throw new Error(`No run with id =${runId}`)\n  return run\n}\n\nexport function isSelectedEvent(state: State, event: AppEvent): boolean {\n  const selected = state.selectedEvent\n  if (!selected || !event) {\n    return false\n  }\n  const run = state.runsById[selected.runId]\n  return run && run.eventsById[selected.eventId] === event\n}\n\nexport function getSelectedEvent(\n  state: State,\n  event: SelectedEvent = state.selectedEvent\n): AppEvent | null {\n  if (!event) {\n    return null\n  }\n\n  return state.runsById[event.runId].eventsById[event.eventId]\n}\n\nexport function getLatestRun(state: State): Run {\n  return state.runsById[getLatestRunId(state)]\n}\n\nexport function canTravelToSelectedEvent(state: State): boolean {\n  const run = getLatestRun(state)\n  const event = getSelectedEvent(state)\n  if (!run || !event) {\n    return false\n  }\n\n  if (event.type === \"action\") {\n    return event.stateAfter && event.stateAfter !== run.currentState\n  }\n  if (event.type === \"init\") {\n    return event.state !== run.currentState\n  }\n  return false\n}\n","import { AppEvent, StringMap, ValueDisplay } from \"./api\"\n\ninterface AllowedValueDisplays {\n  [eventType: string]: StringMap<boolean>\n}\n\nconst ALLOWED_VALUE_DISPLAY: AllowedValueDisplays = {\n  action: {\n    state: true,\n    result: true,\n    data: true,\n    \"debugger-state\": true\n  },\n  function: {\n    args: true,\n    result: true,\n    \"debugger-state\": true\n  },\n  init: {\n    state: true,\n    \"debugger-state\": true\n  },\n  message: {\n    message: true,\n    \"debugger-state\": true\n  }\n}\n\nexport const VALUE_DISPLAYS: StringMap<string[]> = {\n  action: [\"state\", \"result\", \"data\", \"debugger-state\"],\n  function: [\"args\", \"result\", \"debugger-state\"],\n  init: [\"state\", \"debugger-state\"],\n  message: [\"message\", \"debugger-state\"]\n}\n\nconst DEFAULT_VALUE_DISPLAYS: StringMap<ValueDisplay> = {\n  action: \"state\",\n  function: \"result\",\n  init: \"state\",\n  message: \"message\"\n}\n\nexport function sanitizeValueDisplay(\n  valueDisplay: ValueDisplay,\n  event: AppEvent\n): ValueDisplay {\n  if (!ALLOWED_VALUE_DISPLAY[event.type][valueDisplay]) {\n    return DEFAULT_VALUE_DISPLAYS[event.type]\n  }\n\n  // for actions with error, select the result to show the error.\n  if (valueDisplay === \"state\" && event[\"error\"]) {\n    return \"result\"\n  }\n\n  return valueDisplay\n}\n","import { h } from \"hyperapp\"\n\nimport \"./DebuggerOptions.scss\"\n\nimport { State, Actions, StringMap } from \"../api\"\nimport { getSelectedEvent } from \"../selectors\"\nimport { VALUE_DISPLAYS } from \"../valueDisplay\"\n\nconst LABELS: StringMap<string> = {\n  state: \"Show full state\",\n  result: \"Show action or function result\",\n  args: \"Show function arguments\",\n  message: \"Show message\",\n  data: \"Show action data\",\n  \"debugger-state\": \"Show debugger full state (for debug only)\"\n}\n\nfunction ValueDisplaySelect(props: DebuggerOptionsProps) {\n  const { state, actions } = props\n  const event = getSelectedEvent(state)\n\n  return (\n    <select\n      onchange={e => actions.setValueDisplay(e.target.value)}\n      value={state.valueDisplay}\n    >\n      {VALUE_DISPLAYS[event.type].map(value => (\n        <option value={value}>{LABELS[value]}</option>\n      ))}\n    </select>\n  )\n}\n\nexport interface DebuggerOptionsProps {\n  state: State\n  actions: Actions\n}\n\nexport function DebuggerOptions(props: DebuggerOptionsProps) {\n  const { state, actions } = props\n\n  return (\n    <div class=\"debugger-options\">\n      <div class=\"option\">\n        <input\n          id=\"debugger-group-actions-cb\"\n          type=\"checkbox\"\n          checked={state.collapseRepeatingEvents}\n          onchange={actions.toggleCollapseRepeatingEvents}\n        />\n        <label for=\"debugger-group-actions-cb\">Group repeating actions</label>\n      </div>\n      <div class=\"option\">{ValueDisplaySelect(props)}</div>\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./Icon.scss\"\n\n// manually imported from open-iconic\n\ninterface SvgProps {\n  d: string\n  transform: string\n  class?: string\n}\n\nconst Svg = (d: string, transform: string) => (props: IconProps) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"8\"\n      height=\"8\"\n      viewBox=\"0 0 8 8\"\n      class={props.class || \"\"}\n      onclick={props.onclick}\n    >\n      <path d={d} transform={transform} />\n    </svg>\n  )\n}\n\nexport type IconName = \"caret-right\" | \"caret-bottom\" | \"cross\" | \"empty\"\n\nexport interface IconProps {\n  name: IconName\n  class?: string\n  onclick?: any\n}\n\nconst CaretRight = Svg(\"M0 0v8l4-4-4-4z\", \"translate(2)\")\nconst CaretBottom = Svg(\"M0 0l4 4 4-4h-8z\", \"translate(0 2)\")\nconst Cross = Svg(\n  \"M1.41 0l-1.41 1.41.72.72 1.78 1.81-1.78 1.78-.72.69 1.41 1.44.72-.72 1.81-1.81 1.78 1.81.69.72 1.44-1.44-.72-.69-1.81-1.78 1.81-1.81.72-.72-1.44-1.41-.69.72-1.78 1.78-1.81-1.78-.72-.72z\",\n  \"\"\n)\nconst Empty = Svg(\"\", \"\")\n\nexport function Icon(props: IconProps) {\n  switch (props.name) {\n    case \"caret-bottom\":\n      return CaretBottom(props)\n    case \"caret-right\":\n      return CaretRight(props)\n    case \"cross\":\n      return Cross(props)\n    case \"empty\":\n      return Empty(props)\n    default:\n      throw new Error(\"Invalid icon \" + props.name)\n  }\n}\n","import { h } from \"hyperapp\"\n\nimport \"./DebugPaneToolbar.scss\"\n\nimport { State, Actions } from \"../api\"\nimport { canTravelToSelectedEvent } from \"../selectors\"\nimport { Icon } from \"./Icon\"\n\nexport interface DebugPaneToolbarProps {\n  state: State\n  actions: Actions\n}\n\nexport function DebugPaneToolbar(props: DebugPaneToolbarProps) {\n  const { state, actions } = props\n\n  return (\n    <div class=\"debug-pane-toolbar\">\n      <span class=\"toolbar-section view-buttons\">\n        <button\n          class={state.paneDisplay === \"fullscreen\" ? \"selected\" : \"\"}\n          onclick={() => actions.setPaneDisplay(\"fullscreen\")}\n        >\n          Full Screen\n        </button>\n        <button\n          class={state.paneDisplay === \"right\" ? \"selected\" : \"\"}\n          onclick={() => actions.setPaneDisplay(\"right\")}\n        >\n          Right\n        </button>\n        <button\n          class={state.paneDisplay === \"bottom\" ? \"selected\" : \"\"}\n          onclick={() => actions.setPaneDisplay(\"bottom\")}\n        >\n          Bottom\n        </button>\n      </span>\n      <span class=\"toolbar-section travel-button\">\n        <button\n          onclick={() => actions.timeTravel(state.selectedEvent)}\n          disabled={!canTravelToSelectedEvent(state)}\n        >\n          Travel to Action\n        </button>\n      </span>\n      <span class=\"toolbar-section close-button\">\n        <Icon name=\"cross\" onclick={() => actions.showPane(false)} />\n      </span>\n    </div>\n  )\n}\n","// this file is taken from https://raw.githubusercontent.com/Mytrill/hyperapp-object-view\n// TODO: replace by the real hyperapp-object-view once Whaaley merge the PR :)\n\nimport \"./ObjectView.scss\"\n\nfunction h(nodeName, attributes, children) {\n  return {\n    nodeName: nodeName,\n    attributes: attributes,\n    children: Array.isArray(children) ? children : [children]\n  }\n}\n\nfunction Wrap(data, children) {\n  var key = data.key\n  return h(\"div\", { class: \"-row\" }, [\n    key && h(\"span\", { class: \"-key\" }, key),\n    children\n  ])\n}\n\nfunction Pair(data, classList) {\n  return Wrap(data, h(\"span\", { class: classList }, data.value + \"\"))\n}\n\nfunction Switch(data, path, expanded) {\n  var value = data.value\n  switch (typeof value) {\n    case \"boolean\":\n      return Pair(data, \"-boolean\")\n    case \"function\":\n      return Wrap(data, h(\"span\", { class: \"-function\" }))\n    case \"number\":\n      return Pair(data, \"-number\")\n    case \"object\":\n      return Wrap(\n        data,\n        value\n          ? Array.isArray(value)\n            ? Arr(value, path, expanded)\n            : Obj(value, path, expanded)\n          : h(\"span\", { class: \"-null\" })\n      )\n    case \"string\":\n      return Pair(data, \"-string\")\n    case \"undefined\":\n      return Wrap(data, h(\"span\", { class: \"-undefined\" }))\n  }\n  return Pair(data)\n}\n\nfunction Expand(path, expanded) {\n  return (\n    expanded &&\n    h(\"span\", {\n      class: \"-expand\",\n      onclick: function() {\n        expanded(path, true)\n      }\n    })\n  )\n}\n\nfunction Collapse(path, expanded) {\n  return (\n    expanded &&\n    h(\"span\", {\n      class: \"-collapse\",\n      onclick: function() {\n        expanded(path, false)\n      }\n    })\n  )\n}\n\nfunction Arr(value, path, expanded) {\n  if (expanded && !expanded(path)) {\n    return h(\"span\", { class: \"-array\" }, Expand(path, expanded))\n  }\n  var result = [Collapse(path, expanded)]\n  for (var i = 0; i < value.length; i++) {\n    result.push(Switch({ value: value[i] }, path + \".\" + i, expanded))\n  }\n  return h(\"span\", { class: \"-array\" }, result)\n}\n\nfunction Obj(value, path, expanded) {\n  if (expanded && !expanded(path)) {\n    return h(\"span\", { class: \"-object\" }, Expand(path, expanded))\n  }\n  var keys = Object.keys(value)\n  var result = [Collapse(path, expanded)]\n  // TODO later :)\n  // if (\n  //   value.constructor &&\n  //   value.constructor.name &&\n  //   value.constructor.name !== \"Object\"\n  // ) {\n  //   result.push(`${value.constructor.name} `)\n  // }\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i]\n    result.push(\n      Switch({ key: key, value: value[key] }, path + \".\" + key, expanded)\n    )\n  }\n  return h(\"span\", { class: \"-object\" }, result)\n}\n\nexport function ObjectView(props) {\n  props.path = props.path || \"root\"\n  return h(\n    \"div\",\n    { class: \"_object-view\" },\n    Switch(props, props.path, props.expanded)\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./ObjectDetailsPane.scss\"\n\nimport { ObjectView } from \"./ObjectView\"\n\nimport { State, Actions, Run, AppEvent } from \"../api\"\nimport { getSelectedEvent, isValueDisplayExpanded } from \"../selectors\"\n\ninterface PaneProps {\n  state: State\n  actions: Actions\n  event: AppEvent\n}\n\nfunction Pane(props: PaneProps, value: any) {\n  const { state, actions, event } = props\n\n  function expanded(path: string, expanded?: boolean) {\n    const result = isValueDisplayExpanded(state, path)\n    if (typeof expanded === \"boolean\") {\n      actions.setDetailsPaneExpanded({\n        expanded: !result,\n        path\n      })\n    }\n\n    return result\n  }\n\n  return (\n    <div class=\"object-details-pane scrollable\">\n      {ObjectView({ value, expanded })}\n    </div>\n  )\n}\n\nfunction ErrorPane(props: PaneProps, error: any) {\n  if (error instanceof Error) {\n    return (\n      <div class=\"object-details-pane scrollable\">\n        <pre>{error.stack}</pre>\n      </div>\n    )\n  }\n  if (typeof error === \"string\") {\n    return (\n      <div class=\"object-details-pane scrollable\">\n        <pre>{error}</pre>\n      </div>\n    )\n  }\n  return Pane(props, error)\n}\n\nfunction PaneData(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"action\") {\n    return Pane(props, event.data)\n  }\n  throw new Error(`Expected action event but got: ${event.type}`)\n}\n\nfunction PaneResult(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"action\") {\n    if (event.error) {\n      return ErrorPane(props, event.error)\n    }\n    return Pane(props, event.result)\n  }\n  if (event.type === \"function\") {\n    if (event.error) {\n      return ErrorPane(props, event.error)\n    }\n    return Pane(props, event.result)\n  }\n  throw new Error(`Expected action or function event but got: ${event.type}`)\n}\n\nfunction PaneState(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"action\") {\n    return Pane(props, event.stateAfter)\n  }\n  if (event.type === \"init\") {\n    return Pane(props, event.state)\n  }\n  throw new Error(`Expected action or init event but got: ${event.type}`)\n}\n\nfunction PaneArgs(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"function\") {\n    return Pane(props, event.args)\n  }\n  throw new Error(`Expected function event but got: ${event.type}`)\n}\n\nfunction PaneMessage(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"message\") {\n    return Pane(props, event.message)\n  }\n  throw new Error(`Expected message event but got: ${event.type}`)\n}\n\nfunction PaneDebuggerState(props: PaneProps) {\n  return Pane(props, props.state)\n}\n\nexport interface ObjectDetailsPaneProps {\n  state: State\n  actions: Actions\n}\n\nexport function ObjectDetailsPane(props: ObjectDetailsPaneProps) {\n  const { state, actions } = props\n  const event = getSelectedEvent(props.state)\n  switch (props.state.valueDisplay) {\n    case \"args\":\n      return PaneArgs({ state, actions, event })\n    case \"data\":\n      return PaneData({ state, actions, event })\n    case \"result\":\n      return PaneResult({ state, actions, event })\n    case \"message\":\n      return PaneMessage({ state, actions, event })\n    case \"state\":\n      return PaneState({ state, actions, event })\n    case \"debugger-state\":\n      return PaneDebuggerState({ state, actions, event })\n  }\n}\n","import { h } from \"hyperapp\"\n\nimport \"./RunEvent.scss\"\n\nimport { State, Actions, Run, AppEvent } from \"../api\"\nimport { isSelectedEvent } from \"../selectors\"\nimport { RunEventList } from \"./RunEventList\"\nimport { truncate } from \"../utils\"\nimport { Icon } from \"./Icon\"\n\n// # Helpers\n\nfunction getRepeatText(run: Run, events: string[], index: number): string {\n  const event = run.eventsById[events[index]]\n  let result = 1\n  let i = index - 1\n  while (i >= 0) {\n    const previous = run.eventsById[events[i]]\n    if (previous.name === event.name && previous.type === event.type) {\n      result++\n      i--\n    } else {\n      return result === 1 ? \"\" : \" (x\" + result + \")\"\n    }\n  }\n  return result === 1 ? \"\" : \" (x\" + result + \")\"\n}\n\nfunction getArgumentText(arg: any): string {\n  if (\n    arg &&\n    typeof arg === \"object\" &&\n    arg.constructor &&\n    arg.constructor.name !== \"Object\"\n  ) {\n    return arg.constructor.name\n  }\n  return JSON.stringify(arg)\n}\n\nconst MAX_LENGTH = 20\n\nfunction getArgumentsText(args: any[]): string {\n  let result = \"\"\n  for (let i = 0; i < args.length; i++) {\n    const arg = args[i]\n    const text = (result +=\n      getArgumentText(arg) + (i < args.length - 1 ? \", \" : \"\"))\n\n    if (result.length === MAX_LENGTH) {\n      return result\n    } else if (result.length > MAX_LENGTH) {\n      return result.substring(0, MAX_LENGTH - 3) + \"...\"\n    }\n  }\n  return result\n}\n\nfunction getDisplayName(event: AppEvent): string {\n  switch (event.type) {\n    case \"init\":\n      return \"Initial State\"\n    case \"action\":\n      return `${event.name}(${getArgumentsText(\n        typeof event.data === \"undefined\" ? [] : [event.data]\n      )})`\n    case \"function\":\n      return `f ${event.name}(${getArgumentsText(event.args)})`\n    case \"message\":\n      return `[${event.level}] ${truncate(event.message)}`\n  }\n}\n\nfunction getEventClass(event: AppEvent): string {\n  switch (event.type) {\n    case \"init\":\n      return \"\"\n    case \"action\":\n    case \"function\":\n      return event.error ? \"error\" : \"\"\n    case \"message\":\n      return event.level\n  }\n}\n\n// # ToggleActionItem\n\ninterface ToggleEventProps {\n  actions: Actions\n  run: Run\n  event: AppEvent\n}\n\nfunction ToggleEvent(props: ToggleEventProps) {\n  const { actions, run, event } = props\n\n  if (!event.children || event.children.length === 0) {\n    return <Icon name=\"empty\" />\n  }\n\n  const onclick = (e: Event) => {\n    e.stopPropagation()\n    e.preventDefault()\n    actions.toggleEvent({ runId: run.id, eventId: event.id })\n  }\n\n  if (event.collapsed) {\n    return <Icon name=\"caret-right\" onclick={onclick} />\n  }\n\n  return <Icon name=\"caret-bottom\" onclick={onclick} />\n}\n\ninterface EventLinkProps {\n  state: State\n  actions: Actions\n  run: Run\n  event: AppEvent\n  events: string[]\n  indexInList: number\n}\n\nfunction EventLink(props: EventLinkProps) {\n  const { state, actions, run, events, indexInList, event } = props\n\n  const selected = isSelectedEvent(state, event)\n  const className = \"item-link\" + (selected ? \" selected\" : \"\")\n\n  const onclick = e => {\n    e.preventDefault()\n    actions.select({ runId: run.id, eventId: event.id })\n  }\n\n  return (\n    <a href=\"\" class={className} onclick={onclick}>\n      {ToggleEvent(props)}\n      <span class={getEventClass(event)}>{getDisplayName(event)}</span>\n      {state.collapseRepeatingEvents && (\n        <span class=\"run-event-count\">\n          {getRepeatText(run, events, indexInList)}\n        </span>\n      )}\n    </a>\n  )\n}\n\n// # RunActionItem Component\n\nexport interface RunEventProps {\n  state: State\n  actions: Actions\n  run: Run\n  event: AppEvent\n  events: string[]\n  indexInList: number\n}\n\nexport function RunEvent(props: RunEventProps) {\n  const { state, actions, run, events, indexInList, event } = props\n\n  const nextEvent = run.eventsById[events[indexInList + 1]]\n  if (\n    nextEvent &&\n    nextEvent.name === event.name &&\n    nextEvent.type === event.type &&\n    state.collapseRepeatingEvents\n  ) {\n    return null\n  }\n\n  return (\n    <li class=\"run-event\" key={indexInList}>\n      {EventLink(props)}\n      {event.children &&\n        !event.collapsed &&\n        RunEventList({\n          state,\n          actions,\n          run,\n          events: event.children\n        })}\n    </li>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions, Run } from \"../api\"\nimport { RunEvent } from \"./RunEvent\"\n\nimport \"./RunEventList.scss\"\n\n// # Component\n\nexport interface RunEventListProps {\n  state: State\n  actions: Actions\n  run: Run\n  events: string[]\n}\n\nexport function RunEventList(props: RunEventListProps) {\n  const { state, actions, run, events } = props\n  if (events.length === 0) {\n    return null\n  }\n\n  return (\n    <ul class=\"run-event-list\">\n      {events\n        .map((event, indexInList) => {\n          return RunEvent({\n            state,\n            actions,\n            events: run.events,\n            event: run.eventsById[event],\n            indexInList,\n            run\n          })\n        })\n        .reverse()}\n    </ul>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./RunsPaneItem.scss\"\n\nimport { State, Actions, Run } from \"../api\"\nimport { RunEventList } from \"./RunEventList\"\n\nexport interface RunsPaneItemProps {\n  state: State\n  actions: Actions\n  run: Run\n  current: boolean\n}\n\nexport function RunsPaneItem(props: RunsPaneItemProps) {\n  const { state, actions, run, current } = props\n  const date = new Date(run.timestamp).toLocaleTimeString()\n  const collapsed = run.collapsed\n\n  return (\n    <li class=\"run-pane-item\" key={run.timestamp}>\n      <h2>Run - {date}</h2>\n      {!collapsed &&\n        RunEventList({\n          run,\n          state,\n          actions,\n          events: run.events\n        })}\n    </li>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./RunsPane.scss\"\n\nimport { State, Actions, Run } from \"../api\"\nimport { RunsPaneItem } from \"./RunsPaneItem\"\n\nexport interface RunsPaneProps {\n  state: State\n  actions: Actions\n  runs: Run[]\n}\n\nexport function RunsPane(props: RunsPaneProps) {\n  const { state, actions, runs } = props\n  const items = []\n  const lastId = runs.length - 1\n  runs.forEach((run, i) => {\n    items.unshift(\n      RunsPaneItem({ state, actions, run, current: i === lastId })\n    )\n  })\n  return (\n    <div class=\"runs-pane scrollable\">\n      <ul class=\"runs-pane-runs scrollable-content\">{items}</ul>\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./DebugPaneContent.scss\"\n\nimport { State, Actions } from \"../api\"\nimport { ObjectDetailsPane } from \"./ObjectDetailsPane\"\nimport { RunsPane } from \"./RunsPane\"\n\nexport interface DebugPaneContentProps {\n  state: State\n  actions: Actions\n}\n\nexport function DebugPaneContent(props: DebugPaneContentProps) {\n  const { state, actions } = props\n\n  const runs = state.runs.map(id => state.runsById[id])\n  if (runs.length === 0) {\n    return (\n      <div class=\"debug-pane-content\">\n        <p>No debug information found, please debug this project.</p>\n      </div>\n    )\n  }\n  return (\n    <div class=\"debug-pane-content\">\n      {RunsPane({ state, actions, runs })}\n      {ObjectDetailsPane({ state, actions })}\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions, PaneDisplay } from \"../api\"\n\nimport { DebuggerOptions } from \"./DebuggerOptions\"\nimport { DebugPaneToolbar } from \"./DebugPaneToolbar\"\nimport { DebugPaneContent } from \"./DebugPaneContent\"\n\nimport \"./DebugPane.scss\"\n\nexport interface DebugPaneProps {\n  state: State\n  actions: Actions\n}\n\nexport function DebugPane(props: DebugPaneProps) {\n  const { state, actions } = props\n\n  return (\n    <div class=\"hyperapp-devtools debug-pane\">\n      {DebugPaneToolbar({ state, actions })}\n      {DebuggerOptions({ state, actions })}\n      {DebugPaneContent({ state, actions })}\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions } from \"../api\"\n\nimport \"./TogglePaneButton.scss\"\n\nexport interface TogglePaneButtonProps {\n  state: State\n  actions: Actions\n}\n\nexport function TogglePaneButton(props: TogglePaneButtonProps) {\n  const { state, actions } = props\n\n  return (\n    <div class=\"hyperapp-devtools toggle-pane-button\">\n      <button onclick={() => actions.showPane(!state.paneShown)}>\n        Devtools\n      </button>\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions, PaneDisplay } from \"./api\"\nimport { DebugPane, TogglePaneButton } from \"./components\"\n\nfunction getClassName(display: PaneDisplay): string {\n  switch (display) {\n    case \"fullscreen\":\n      return \"devtools-overlay\"\n    case \"right\":\n      return \"devtools-overlay align-right\"\n    case \"bottom\":\n      return \"devtools-overlay align-bottom\"\n  }\n}\n\nexport function view(state: State, actions: Actions) {\n  if (state.paneShown) {\n    return (\n      <div class={getClassName(state.paneDisplay)}>\n        {DebugPane({ state, actions })}\n        {TogglePaneButton({ state, actions })}\n      </div>\n    )\n  }\n  return TogglePaneButton({ state, actions })\n}\n","import { State } from \"./api\"\n\nexport const state: State = {\n  runs: [],\n  runsById: {},\n  paneDisplay: \"right\",\n  valueDisplay: \"state\",\n  paneShown: false,\n  selectedEvent: null,\n  collapseRepeatingEvents: true,\n  detailsPaneExpandedPaths: {}\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import * as api from \"../api\"\n\nexport const deleteRun = (id: string) => (\n  state: api.State\n): Partial<api.State> => {\n  const runsById = { ...state.runsById }\n  delete runsById[id]\n  const runs = state.runs.filter(s => s !== id)\n  return { runs, runsById }\n}\n","/**\n * Path: Array<string | number>\n */\nexport type Path = Array<string | number>\n\n/**\n * Get the value at the given path in the given target, or undefined if path doesn't exists.\n */\nexport function get<T = any, R = any>(target: T, path: Path): R {\n  let result: any = target\n  for (var i = 0; i < path.length; i++) {\n    result = result ? result[path[i]] : result\n  }\n  return result as R\n}\n\n/**\n * Immutable set: set the value at the given path in the given target and returns a new target.\n * Creates the necessary objects/arrays if the path doesn't exist.\n */\nexport function set<T = any, V = any, R = any>(\n  target: T,\n  path: Path,\n  value: V\n): R {\n  if (path.length === 0) {\n    return (value as any) as R\n  }\n  return assign(Array.isArray(target) ? [] : {}, target, {\n    [path[0]]:\n      path.length > 1 ? set(target[path[0]] || {}, path.slice(1), value) : value\n  })\n}\n\n/**\n * Immutable merge: merges the given value and the existing value (if any) at the path in the target using Object.assign() and return a new target.\n * Creates the necessary objects/arrays if the path doesn't exist.\n */\nexport function merge<T = any, V = any, R = any>(\n  target: T,\n  path: Path,\n  value: V\n): R {\n  return set(\n    target,\n    path,\n    assign(Array.isArray(value) ? [] : {}, get(target, path), value)\n  )\n}\n\nfunction assign(target: any, obj: any, obj2: any): any {\n  for (let i in obj) {\n    target[i] = obj[i]\n  }\n  for (let i in obj2) {\n    target[i] = obj2[i]\n  }\n  return target\n}\n","import { StringMap } from \"./api\"\n\nconst FUNCTIONS: StringMap<any> = {}\n\nexport function registerDebuggedFunction(name: string, fn: any) {\n  if (FUNCTIONS[name]) {\n    throw new Error(\n      `There is already a function registered with name \"${name}\".`\n    )\n  }\n\n  FUNCTIONS[name] = fn\n}\n\nexport function isRegistered(name: string): boolean {\n  return !!FUNCTIONS[name]\n}\n\nexport function getRegistered(name: string): any {\n  const result = FUNCTIONS[name]\n  if (!result) throw new Error(`No function registered with name ${name}.`)\n  return result\n}\n","import * as api from \"../api\"\nimport { get } from \"../immutable\"\nimport { getRun } from \"../selectors\"\nimport { getRegistered } from \"../debuggedFunctions\"\n\nfunction executeAction(payload: api.ExecutePayload, state: api.State) {\n  const { runId, name, args } = payload\n\n  const run = getRun(state, runId)\n  const action = get(run.interop, name.split(\".\"))\n\n  if (!action) throw new Error(`No action found with name \"${name}\".`)\n\n  action(args[0])\n}\n\nfunction executeFunction(payload: api.ExecutePayload, state: api.State) {\n  const { name, args } = payload\n\n  const fn = getRegistered(name)\n  fn(...args)\n}\n\nexport const execute = (payload: api.ExecutePayload) => (state: api.State) => {\n  const { type, runId, name, args } = payload\n\n  if (type === \"action\") {\n    executeAction(payload, state)\n  } else {\n    executeFunction(payload, state)\n  }\n}\n","import * as api from \"../api\"\nimport { merge } from \"../immutable\"\nimport { getLatestRunId } from \"../selectors\"\nimport { sanitizeValueDisplay } from \"../valueDisplay\"\n\nexport const logCallEnd = (payload: api.LogCallEndPayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId = getLatestRunId(state), eventId, result, error } = payload\n\n  const runsById = { ...state.runsById }\n  const run = { ...runsById[runId] }\n  runsById[runId] = run\n\n  run.eventsById = { ...run.eventsById }\n  const event = { ...run.eventsById[eventId] }\n  run.eventsById[eventId] = event\n  let valueDisplay = state.valueDisplay\n  // update the event\n  if (event.type === \"action\" || event.type === \"function\") {\n    if (result) {\n      event.result = result\n\n      if (event.type === \"action\" && !result.then) {\n        // update the run's current state\n        const path = event.name.split(\".\")\n        path.pop()\n        const stateAfter = merge(event.stateBefore, path, event.result)\n        event.stateAfter = stateAfter\n        run.currentState = stateAfter\n      }\n    }\n    if (error) {\n      event.error = error\n    }\n  }\n\n  // update the current event of the run\n  run.currentEvent =\n    eventId === run.currentEvent ? event.parent : run.currentEvent\n\n  const selectedEvent: api.SelectedEvent = {\n    runId: run.id,\n    eventId\n  }\n\n  valueDisplay = sanitizeValueDisplay(valueDisplay, event)\n\n  return { runsById, selectedEvent, valueDisplay }\n}\n","import * as api from \"../api\"\nimport { getLatestRunId } from \"../selectors\"\n\nfunction getEvent(\n  state: api.State,\n  run: api.Run,\n  payload: api.LogCallStartPayload\n): api.AppEvent {\n  const { args, eventId, name, runId, type } = payload\n  if (type === \"action\") {\n    return {\n      type: \"action\",\n      id: eventId,\n      name,\n      data: args && args.length > 0 ? args[0] : undefined,\n      parent: run.currentEvent,\n      children: [],\n      collapsed: false,\n      stateBefore: run.currentState\n    }\n  }\n\n  return {\n    type: \"function\",\n    id: eventId,\n    name,\n    args,\n    children: [],\n    collapsed: false,\n    parent: run.currentEvent\n  }\n}\n\nexport const logCallStart = (payload: api.LogCallStartPayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId = getLatestRunId(state), eventId } = payload\n  const runsById = { ...state.runsById }\n  const run = { ...runsById[runId] }\n  runsById[runId] = run\n  run.eventsById[eventId] = getEvent(state, run, payload)\n  const parentId = run.currentEvent\n  if (parentId) {\n    // append the event to the parent\n    const parent = { ...run.eventsById[parentId] }\n    run.eventsById[parentId] = parent\n    parent.children = parent.children.concat(eventId)\n  } else {\n    // append the event to the run\n    run.events = run.events.concat(eventId)\n  }\n  run.currentEvent = eventId\n\n  return { runsById }\n}\n","import * as api from \"../api\"\n\nexport const logInit = (payload: api.LogInitPayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId, interop, timestamp } = payload\n  const runs = state.runs.concat(runId)\n  const runsById = { ...state.runsById }\n  const initEvent: api.InitEvent = {\n    id: runId,\n    type: \"init\",\n    name: \"Initial State\",\n    state: payload.state\n  }\n  runsById[runId] = {\n    id: runId,\n    events: [runId],\n    eventsById: { [runId]: initEvent },\n    currentState: payload.state,\n    timestamp,\n    interop,\n    collapsed: false\n  }\n  return {\n    runs,\n    runsById,\n    selectedEvent: {\n      runId,\n      eventId: runId\n    }\n  }\n}\n","import * as api from \"../api\"\n\nexport const logMessage = (payload: api.LogMessagePayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId, eventId, level, message } = payload\n\n  const runsById = { ...state.runsById }\n  const run = { ...runsById[runId] }\n  runsById[runId] = run\n  run.events = run.events.concat(eventId)\n  run.eventsById = {\n    ...run.eventsById,\n    [eventId]: {\n      type: \"message\",\n      level,\n      message,\n      name: level,\n      id: eventId,\n      parent: run.currentEvent\n    }\n  }\n\n  return {\n    runsById,\n    selectedEvent: {\n      runId,\n      eventId\n    }\n  }\n}\n","import * as api from \"../api\"\nimport { getSelectedEvent } from \"../selectors\"\nimport { sanitizeValueDisplay } from \"../valueDisplay\"\n\nexport const select = (selectedEvent: api.SelectedEvent | null) => (\n  state: api.State\n): Partial<api.State> => {\n  const event = getSelectedEvent(state, selectedEvent)\n  return {\n    selectedEvent,\n    valueDisplay: sanitizeValueDisplay(state.valueDisplay, event)\n  }\n}\n","import * as api from \"../api\"\nimport { set } from \"../immutable\"\n\nexport const setDetailsPaneExpanded = (\n  payload: api.SetDetailsPaneExpandedPayload\n) => (state: api.State): Partial<api.State> => {\n  const { path, expanded } = payload\n  return {\n    detailsPaneExpandedPaths: {\n      ...state.detailsPaneExpandedPaths,\n      [path]: expanded\n    }\n  }\n}\n","import * as api from \"../api\"\n\nexport const setPaneDisplay = (paneDisplay: api.PaneDisplay) => (\n  state: api.State\n): Partial<api.State> => ({\n  paneDisplay\n})\n","import * as api from \"../api\"\n\nexport const setValueDisplay = (valueDisplay: api.ValueDisplay) => (\n  state: api.State\n): Partial<api.State> => ({\n  valueDisplay\n})\n","import * as api from \"../api\"\n\nexport const showPane = (paneShown: boolean) => (\n  state: api.State\n): Partial<api.State> => ({\n  paneShown\n})\n","export interface StringMap<V> {\n  [key: string]: V\n}\n\nexport type EventType = \"function\" | \"action\" | \"init\" | \"message\"\n\nexport type AppEvent = InitEvent | ActionEvent | FunctionEvent | MessageEvent\n\nexport interface BaseEvent {\n  id: string\n  type: EventType\n  name: string\n  children?: string[]\n  collapsed?: boolean\n  parent?: string\n}\n\nexport interface InitEvent extends BaseEvent {\n  type: \"init\"\n  state: any\n}\n\nexport interface ActionEvent extends BaseEvent {\n  type: \"action\"\n  data: any\n  result?: any\n  error?: any\n  stateBefore: any\n  stateAfter?: any\n}\n\nexport interface FunctionEvent extends BaseEvent {\n  type: \"function\"\n  args: any[]\n  result?: any\n  error?: any\n  returnedBy?: string\n}\n\nexport type LogLevel = \"info\" | \"warn\" | \"error\"\n\nexport interface MessageEvent extends BaseEvent {\n  type: \"message\"\n  level: LogLevel\n  message: any\n}\n\nexport interface Run {\n  id: string\n  events: string[]\n  eventsById: StringMap<AppEvent>\n  timestamp: number\n  collapsed: boolean\n  currentEvent?: string\n  currentState?: any\n  interop: any\n}\n\nexport interface SelectedEvent {\n  runId: string\n  eventId: string\n}\n\nexport type PaneDisplay = \"fullscreen\" | \"right\" | \"bottom\"\n\nexport type ValueDisplay =\n  | \"state\"\n  | \"result\"\n  | \"args\"\n  | \"message\"\n  | \"data\"\n  | \"debugger-state\"\n\nexport interface State {\n  runs: string[]\n  runsById: StringMap<Run>\n  selectedEvent: SelectedEvent | null\n  collapseRepeatingEvents: boolean\n  valueDisplay: ValueDisplay\n  detailsPaneExpandedPaths: StringMap<boolean>\n  paneDisplay: PaneDisplay\n  paneShown: boolean\n}\n\n// # Actions\n\nexport interface LogInitPayload {\n  runId: string\n  timestamp: number\n  state: any\n  interop: any\n}\n\nexport interface LogMessagePayload {\n  runId: string\n  eventId: string\n  level: LogLevel\n  message: any\n}\n\nexport interface LogCallStartPayload {\n  // use latest if not set.\n  runId?: string\n  eventId: string\n  type: \"function\" | \"action\"\n  name: string\n  args: any[]\n}\n\nexport interface LogCallEndPayload {\n  runId?: string\n  eventId: string\n  result?: any\n  error?: any\n}\n\nexport interface ToggleEventPayload {\n  runId: string\n  eventId: string\n}\n\nexport interface SetDetailsPaneExpandedPayload {\n  path: string\n  expanded: boolean\n}\n\nexport interface ExecutePayload {\n  type: \"function\" | \"action\"\n  runId: string\n  name: string\n  args: any[]\n}\n\nexport interface Actions {\n  logInit(payload: LogInitPayload)\n  logMessage(payload: LogMessagePayload)\n  logCallStart(payload: LogCallStartPayload)\n  logCallEnd(payload: LogCallEndPayload)\n  toggleRun(run: string)\n  toggleEvent(payload: ToggleEventPayload)\n  toggleCollapseRepeatingEvents()\n  setDetailsPaneExpanded(payload: SetDetailsPaneExpandedPayload)\n  showPane(shown: boolean)\n  setPaneDisplay(paneDisplay: PaneDisplay)\n  setValueDisplay(valueDisplay: ValueDisplay)\n  select(action: SelectedEvent | null)\n  timeTravel(action: SelectedEvent)\n  execute(payload: ExecutePayload)\n  deleteRun(id: string)\n}\n\nexport const injectedSetState = \"$__SET_STATE\"\n","import * as api from \"../api\"\nimport { getSelectedEvent, getRun } from \"../selectors\"\n\nexport const timeTravel = (selectedEvent: api.SelectedEvent) => (\n  state: api.State\n) => {\n  const run = getRun(state, selectedEvent.runId)\n  if (!run) {\n    return\n  }\n\n  const event = getSelectedEvent(state, selectedEvent)\n  if (event) {\n    if (event.type === \"action\" && event.stateAfter) {\n      run.interop[api.injectedSetState](event.stateAfter)\n      return\n    }\n    if (event.type === \"init\") {\n      run.interop[api.injectedSetState](event.state)\n    }\n  }\n}\n","import * as api from \"../api\"\n\nexport const toggleCollapseRepeatingEvents = () => (\n  state: api.State\n): Partial<api.State> => ({\n  collapseRepeatingEvents: !state.collapseRepeatingEvents\n})\n","import * as api from \"../api\"\nimport { get, set } from \"../immutable\"\n\nexport const toggleEvent = (payload: api.ToggleEventPayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId, eventId } = payload\n\n  // const collapsed = state.runsById[runId].eventsById[eventId].collapsed\n  const collapsed = get(state.runsById, [\n    runId,\n    \"eventsById\",\n    eventId,\n    \"collapsed\"\n  ])\n  // state.runsById[runId].eventsById[eventId].collapsed = !collapsed\n  return {\n    runsById: set(\n      state.runsById,\n      [runId, \"eventsById\", eventId, \"collapsed\"],\n      !collapsed\n    )\n  }\n}\n","import * as api from \"../api\"\n\nexport const toggleRun = (id: string) => (state: api.State) => {\n  const runsById = { ...state.runsById }\n  runsById[id] = { ...runsById[id], collapsed: !runsById[id].collapsed }\n  return { runsById }\n}\n","import { Actions } from \"./api\"\nimport { guid } from \"./utils\"\n\nexport function enhanceActions(\n  hoaActions: Actions,\n  runId: string,\n  actions: any,\n  prefix?: string\n): any {\n  const result = {}\n\n  const namespace = prefix ? prefix + \".\" : \"\"\n  Object.keys(actions || {}).forEach(name => {\n    var action = actions[name]\n    if (!action) {\n      result[name] = null\n      return\n    }\n\n    const fnName = action.name || name\n    const namedspacedName = namespace + fnName\n    if (typeof action === \"function\") {\n      result[name] = function(data) {\n        return function(state, actions) {\n          const eventId = guid()\n          hoaActions.logCallStart({\n            type: \"action\",\n            name: namedspacedName,\n            args: [data],\n            eventId,\n            runId\n          })\n          try {\n            let result = action(data)\n            result =\n              typeof result === \"function\" ? result(state, actions) : result\n\n            hoaActions.logCallEnd({\n              runId,\n              eventId,\n              result\n            })\n\n            return result\n          } catch (error) {\n            hoaActions.logCallEnd({\n              runId,\n              eventId,\n              error\n            })\n\n            throw error\n          }\n        }\n      }\n    } else {\n      result[name] = enhanceActions(hoaActions, runId, action, namedspacedName)\n    }\n  })\n\n  return result\n}\n\nexport default enhanceActions\n","import { h } from \"hyperapp\"\n\nimport { guid } from \"./utils\"\nimport { view } from \"./view\"\nimport { state } from \"./state\"\nimport { Actions } from \"./api\"\nimport * as actions from \"./actions\"\nimport enhanceActions from \"./enhanceActions\"\nimport { injectedSetState } from \"./api\"\n\n// Rewrite the view more permissive than HA to allow for multiple VNode implementations.\n// e.g. the one in HA 1.1.2 and the on in HA 1.2.5\nexport interface View {\n  (state: any, actions: any): any\n}\n\nexport interface HypperApp {\n  (state: any, actions: any, view: View, container: Element | null): any\n}\n\nlet devtoolsApp: Actions\n\nexport function getDevtoolsApp() {\n  return devtoolsApp\n}\n\nexport function devtools<App extends HypperApp>(app: App): App {\n  const div = document.createElement(\"div\")\n  document.body.appendChild(div)\n\n  devtoolsApp = app(state, actions, view, div)\n\n  return <App>function(state: any, actions: any, view, element) {\n    const runId = guid()\n\n    actions[injectedSetState] = function timeTravel(state) {\n      return state\n    }\n    actions = enhanceActions(devtoolsApp, runId, actions)\n\n    const interop: any = app(state, actions, view, element)\n\n    devtoolsApp.logInit({\n      runId,\n      state,\n      timestamp: new Date().getTime(),\n      interop\n    })\n\n    return interop\n  }\n}\nexport default devtools\n","import { StringMap } from \"./api\"\nimport { getDevtoolsApp } from \"./devtools\"\nimport { guid } from \"./utils\"\nimport { registerDebuggedFunction } from \"./debuggedFunctions\"\n\nfunction debugWithoutRegistering<T extends Function = any>(\n  val: T,\n  name: string = \"(anonymous function)\"\n): T {\n  return <any>function(...args) {\n    const actions = getDevtoolsApp()\n    const eventId = guid()\n    if (actions) {\n      actions.logCallStart({\n        type: \"function\",\n        eventId,\n        name,\n        args\n      })\n    }\n\n    try {\n      const result = (<any>val)(...args)\n\n      if (actions) {\n        actions.logCallEnd({\n          eventId,\n          result\n        })\n      }\n\n      if (typeof result === \"function\") {\n        return debugWithoutRegistering(result)\n      }\n\n      return result\n    } catch (error) {\n      if (actions) {\n        actions.logCallEnd({\n          eventId,\n          error\n        })\n      }\n\n      throw error\n    }\n  }\n}\n\nexport function debug<T extends Function = any>(\n  nameOrValue: T | string,\n  value?: T\n): T {\n  const val = typeof nameOrValue === \"string\" ? value : nameOrValue\n  const name = typeof nameOrValue === \"string\" ? nameOrValue : nameOrValue.name\n  if (!name) {\n    throw new Error(\n      `Please provide a unique name: debug(\"myFn\", () => { ... } or use a named function.`\n    )\n  }\n\n  if (typeof val !== \"function\") {\n    throw new Error(`Can only debug a function but got ${typeof val}.`)\n  }\n\n  registerDebuggedFunction(name, val)\n\n  return debugWithoutRegistering(val, name)\n}\n"],"names":["h","api.injectedSetState","state","view"],"mappings":"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"}