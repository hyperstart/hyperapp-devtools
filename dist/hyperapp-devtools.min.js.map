{"version":3,"file":"hyperapp-devtools.min.js","sources":["../src/utils.ts","../node_modules/hyperapp/src/index.js","../node_modules/style-inject/dist/style-inject.es.js","../src/selectors.ts","../src/valueDisplay.ts","../src/components/DebuggerOptions.tsx","../src/components/Icon.tsx","../src/components/ObjectView.js","../src/components/CallOverviewDetailsPane.tsx","../src/components/ObjectDetailsPane.tsx","../src/components/RunEvent.tsx","../src/components/RunEventList.tsx","../src/components/RunsPane.tsx","../src/components/RunsPaneItem.tsx","../src/components/DebugPane.tsx","../src/components/DebugPaneContent.tsx","../src/components/DebugPaneToolbar.tsx","../src/components/TogglePaneButton.tsx","../src/view.tsx","../src/state.ts","../node_modules/tslib/tslib.es6.js","../src/immutable.ts","../src/debuggedFunctions.ts","../src/actions/execute.ts","../src/actions/select.ts","../src/devtools.ts","../src/api.ts","../src/actions/deleteRun.ts","../src/actions/logCallEnd.ts","../src/actions/logCallStart.ts","../src/actions/logInit.ts","../src/actions/logMessage.ts","../src/actions/setCallOverviewText.ts","../src/actions/setDetailsPaneExpanded.ts","../src/actions/setPaneDisplay.ts","../src/actions/setValueDisplay.ts","../src/actions/showPane.ts","../src/actions/timeTravel.ts","../src/actions/toggleCollapseRepeatingEvents.ts","../src/actions/toggleEvent.ts","../src/actions/toggleRun.ts","../src/debug.ts","../src/enhanceActions.ts"],"sourcesContent":["const ALPHABET =\n  \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"\nconst SIZE = 16\nconst rand = () => ALPHABET[Math.floor(Math.random() * ALPHABET.length)]\n\nexport const guid = () =>\n  Array.apply(null, Array(SIZE))\n    .map(rand)\n    .join(\"\")\n\nexport function truncate(value: string, maxLength: number = 30): string {\n  if (value.length <= maxLength) {\n    return value\n  }\n  return value.substr(0, maxLength - 2) + \"...\"\n}\n\nexport function getErrorMessage(error: any): string {\n  if (typeof error === \"string\") {\n    return error\n  }\n  if (error instanceof Error) {\n    return error.message\n  }\n  return JSON.stringify(error)\n}\n","export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null ? node : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function set(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1 ? set(path.slice(1), value, source[path[0]]) : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function get(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(get(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = get(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = set(path, clone(state, result), globalState))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      for (var i in clone(oldValue, value)) {\n        var style = value == null || value[i] == null ? \"\" : value[i]\n        if (i[0] === \"-\") {\n          element[name].setProperty(i, style)\n        } else {\n          element[name][i] = style\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (name in element && name !== \"list\" && !isSvg) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import {\n  AppEvent,\n  State,\n  Run,\n  SelectedEvent,\n  ActionEvent,\n  FunctionEvent\n} from \"./api\"\nimport { get, Path } from \"./immutable\"\n\nexport function isValueDisplayExpanded(state: State, path: string): boolean {\n  const expanded = state.detailsPaneExpandedPaths[path]\n  if (typeof expanded === \"boolean\") {\n    return expanded\n  }\n  return path.split(\".\").length < 4\n}\n\nexport function getLatestRunId(state: State): string {\n  const runs = state.runs\n  if (runs.length > 0) {\n    return runs[runs.length - 1]\n  }\n  throw new Error(\"No run found.\")\n}\n\nexport function getRun(state: State, runId: string): Run {\n  const run = state.runsById[runId]\n  if (!run) throw new Error(`No run with id =${runId}`)\n  return run\n}\n\nexport function isSelectedEvent(state: State, event: AppEvent): boolean {\n  const selected = state.selectedEvent\n  if (!selected || !event) {\n    return false\n  }\n  const run = state.runsById[selected.runId]\n  return run && run.eventsById[selected.eventId] === event\n}\n\nexport function getSelectedEvent(\n  state: State,\n  event: SelectedEvent = state.selectedEvent\n): AppEvent | null {\n  if (!event) {\n    return null\n  }\n\n  return state.runsById[event.runId].eventsById[event.eventId]\n}\n\nexport function getLatestRun(state: State): Run {\n  return state.runsById[getLatestRunId(state)]\n}\n\nexport function canTravelToSelectedEvent(state: State): boolean {\n  const run = getLatestRun(state)\n  const event = getSelectedEvent(state)\n  if (!run || !event) {\n    return false\n  }\n\n  if (event.type === \"action\") {\n    return event.stateAfter && event.stateAfter !== run.currentState\n  }\n  if (event.type === \"init\") {\n    return event.state !== run.currentState\n  }\n  return false\n}\n\nfunction getCallArgsText(event: ActionEvent | FunctionEvent): string {\n  if (event.type === \"action\") {\n    if (event.data === undefined) {\n      return \"\"\n    }\n    return JSON.stringify(event.data)\n  }\n  if (event.args.length === 0) {\n    return \"\"\n  }\n  const str = JSON.stringify(event.args)\n  return str.substring(1, str.length - 1)\n}\n\nfunction getCallNameText(event: ActionEvent | FunctionEvent): string {\n  return (event.type === \"action\" ? \"actions.\" : \"\") + event.name\n}\n\nexport function getCallText(event: ActionEvent | FunctionEvent): string {\n  return `${getCallNameText(event)}(${getCallArgsText(event)})`\n}\n\nexport function getArgsFromCallText(\n  event: ActionEvent | FunctionEvent,\n  text: string\n): any[] {\n  const prefix = getCallNameText(event) + \"(\"\n  const suffix = \")\"\n  if (!text.startsWith(prefix) || !text.endsWith(suffix)) {\n    throw new Error(`Call must be of the form: \"${prefix}(arg1, arg2, ...)\"`)\n  }\n\n  return JSON.parse(\"[\" + text.substring(prefix.length, text.length - 1) + \"]\")\n}\n","import { AppEvent, StringMap, ValueDisplay } from \"./api\"\n\ninterface AllowedValueDisplays {\n  [eventType: string]: StringMap<boolean>\n}\n\nconst ALLOWED_VALUE_DISPLAY: AllowedValueDisplays = {\n  action: {\n    state: true,\n    result: true,\n    data: true,\n    \"call-overview\": true,\n    \"debugger-state\": true\n  },\n  function: {\n    args: true,\n    result: true,\n    \"call-overview\": true,\n    \"debugger-state\": true\n  },\n  init: {\n    state: true,\n    \"debugger-state\": true\n  },\n  message: {\n    message: true,\n    \"debugger-state\": true\n  }\n}\n\nexport const VALUE_DISPLAYS: StringMap<string[]> = {\n  action: [\"state\", \"call-overview\", \"result\", \"data\", \"debugger-state\"],\n  function: [\"call-overview\", \"args\", \"result\", \"debugger-state\"],\n  init: [\"state\", \"debugger-state\"],\n  message: [\"message\", \"debugger-state\"]\n}\n\nconst DEFAULT_VALUE_DISPLAYS: StringMap<ValueDisplay> = {\n  action: \"state\",\n  function: \"call-overview\",\n  init: \"state\",\n  message: \"message\"\n}\n\nexport function sanitizeValueDisplay(\n  valueDisplay: ValueDisplay,\n  event: AppEvent\n): ValueDisplay {\n  if (!ALLOWED_VALUE_DISPLAY[event.type][valueDisplay]) {\n    return DEFAULT_VALUE_DISPLAYS[event.type]\n  }\n\n  // for actions with error, select the result to show the error.\n  if (valueDisplay === \"state\" && event[\"error\"]) {\n    return \"result\"\n  }\n\n  return valueDisplay\n}\n","import { h } from \"hyperapp\"\n\nimport \"./DebuggerOptions.scss\"\n\nimport { State, Actions, StringMap } from \"../api\"\nimport { getSelectedEvent } from \"../selectors\"\nimport { VALUE_DISPLAYS } from \"../valueDisplay\"\n\nconst LABELS: StringMap<string> = {\n  state: \"Show full state\",\n  result: \"Show action or function result\",\n  args: \"Show function arguments\",\n  message: \"Show message\",\n  data: \"Show action data\",\n  \"call-overview\": \"Overview of the call\",\n  \"debugger-state\": \"Show debugger full state (for debug only)\"\n}\n\nfunction ValueDisplaySelect(props: DebuggerOptionsProps) {\n  const { state, actions } = props\n  const event = getSelectedEvent(state)\n\n  return (\n    <select\n      onchange={e => actions.setValueDisplay(e.target.value)}\n      value={state.valueDisplay}\n    >\n      {VALUE_DISPLAYS[event.type].map(value => (\n        <option value={value}>{LABELS[value]}</option>\n      ))}\n    </select>\n  )\n}\n\nexport interface DebuggerOptionsProps {\n  state: State\n  actions: Actions\n}\n\nexport function DebuggerOptions(props: DebuggerOptionsProps) {\n  const { state, actions } = props\n\n  return (\n    <div class=\"debugger-options\">\n      <div class=\"option\">\n        <input\n          id=\"debugger-group-actions-cb\"\n          type=\"checkbox\"\n          checked={state.collapseRepeatingEvents}\n          onchange={actions.toggleCollapseRepeatingEvents}\n        />\n        <label for=\"debugger-group-actions-cb\">Group repeating actions</label>\n      </div>\n      <div class=\"option\">{ValueDisplaySelect(props)}</div>\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./Icon.scss\"\n\n// manually imported from open-iconic\n\ninterface SvgProps {\n  d: string\n  transform: string\n  class?: string\n}\n\nconst Svg = (d: string, transform: string) => (props: IconProps) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"8\"\n      height=\"8\"\n      viewBox=\"0 0 8 8\"\n      class={props.class || \"\"}\n      onclick={props.onclick}\n    >\n      <path d={d} transform={transform} />\n    </svg>\n  )\n}\n\nexport type IconName = \"caret-right\" | \"caret-bottom\" | \"cross\" | \"empty\"\n\nexport interface IconProps {\n  name: IconName\n  class?: string\n  onclick?: any\n}\n\nconst CaretRight = Svg(\"M0 0v8l4-4-4-4z\", \"translate(2)\")\nconst CaretBottom = Svg(\"M0 0l4 4 4-4h-8z\", \"translate(0 2)\")\nconst Cross = Svg(\n  \"M1.41 0l-1.41 1.41.72.72 1.78 1.81-1.78 1.78-.72.69 1.41 1.44.72-.72 1.81-1.81 1.78 1.81.69.72 1.44-1.44-.72-.69-1.81-1.78 1.81-1.81.72-.72-1.44-1.41-.69.72-1.78 1.78-1.81-1.78-.72-.72z\",\n  \"\"\n)\nconst Empty = Svg(\"\", \"\")\n\nexport function Icon(props: IconProps) {\n  switch (props.name) {\n    case \"caret-bottom\":\n      return CaretBottom(props)\n    case \"caret-right\":\n      return CaretRight(props)\n    case \"cross\":\n      return Cross(props)\n    case \"empty\":\n      return Empty(props)\n    default:\n      throw new Error(\"Invalid icon \" + props.name)\n  }\n}\n","// this file is taken from https://raw.githubusercontent.com/Mytrill/hyperapp-object-view\n// TODO: replace by the real hyperapp-object-view once Whaaley merge the PR :)\n\nimport \"./ObjectView.scss\"\n\nfunction h(nodeName, attributes, children) {\n  return {\n    nodeName: nodeName,\n    attributes: attributes,\n    children: Array.isArray(children) ? children : [children]\n  }\n}\n\nfunction Wrap(data, children) {\n  var key = data.key\n  return h(\"div\", { class: \"-row\" }, [\n    key && h(\"span\", { class: \"-key\" }, key),\n    children\n  ])\n}\n\nfunction Pair(data, classList) {\n  return Wrap(data, h(\"span\", { class: classList }, data.value + \"\"))\n}\n\nfunction Switch(data, path, expanded) {\n  var value = data.value\n  switch (typeof value) {\n    case \"boolean\":\n      return Pair(data, \"-boolean\")\n    case \"function\":\n      return Wrap(data, h(\"span\", { class: \"-function\" }))\n    case \"number\":\n      return Pair(data, \"-number\")\n    case \"object\":\n      return Wrap(\n        data,\n        value\n          ? Array.isArray(value)\n            ? Arr(value, path, expanded)\n            : Obj(value, path, expanded)\n          : h(\"span\", { class: \"-null\" })\n      )\n    case \"string\":\n      return Pair(data, \"-string\")\n    case \"undefined\":\n      return Wrap(data, h(\"span\", { class: \"-undefined\" }))\n  }\n  return Pair(data)\n}\n\nfunction Expand(path, expanded) {\n  return (\n    expanded &&\n    h(\"span\", {\n      class: \"-expand\",\n      onclick: function() {\n        expanded(path, true)\n      }\n    })\n  )\n}\n\nfunction Collapse(path, expanded) {\n  return (\n    expanded &&\n    h(\"span\", {\n      class: \"-collapse\",\n      onclick: function() {\n        expanded(path, false)\n      }\n    })\n  )\n}\n\nfunction Arr(value, path, expanded) {\n  if (expanded && !expanded(path)) {\n    return h(\"span\", { class: \"-array\" }, Expand(path, expanded))\n  }\n  var result = [Collapse(path, expanded)]\n  for (var i = 0; i < value.length; i++) {\n    result.push(Switch({ value: value[i] }, path + \".\" + i, expanded))\n  }\n  return h(\"span\", { class: \"-array\" }, result)\n}\n\nfunction Obj(value, path, expanded) {\n  if (expanded && !expanded(path)) {\n    return h(\"span\", { class: \"-object\" }, Expand(path, expanded))\n  }\n  var keys = Object.keys(value)\n  var result = [Collapse(path, expanded)]\n  // TODO later :)\n  // if (\n  //   value.constructor &&\n  //   value.constructor.name &&\n  //   value.constructor.name !== \"Object\"\n  // ) {\n  //   result.push(`${value.constructor.name} `)\n  // }\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i]\n    result.push(\n      Switch({ key: key, value: value[key] }, path + \".\" + key, expanded)\n    )\n  }\n  return h(\"span\", { class: \"-object\" }, result)\n}\n\nexport function ObjectView(props) {\n  props.path = props.path || \"root\"\n  return h(\n    \"div\",\n    { class: \"_object-view\" },\n    Switch(props, props.path, props.expanded)\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions, ActionEvent, FunctionEvent } from \"../api\"\nimport {\n  isValueDisplayExpanded,\n  getCallText,\n  getArgsFromCallText\n} from \"../selectors\"\nimport { ObjectView } from \"./ObjectView\"\n\nimport \"./CallOverviewDetailsPane.scss\"\nimport { getErrorMessage } from \"../utils\"\n\ninterface CallProps extends CallOverviewDetailsPaneProps {\n  args?: any[]\n  error?: string\n}\n\n// # getCallProps\n\nfunction getCallProps(props: CallOverviewDetailsPaneProps): CallProps {\n  const { state, actions, event } = props\n  try {\n    const args = getArgsFromCallText(event, state.callOverviewText)\n    return { state, actions, event, args }\n  } catch (e) {\n    const error = getErrorMessage(e)\n    return { state, actions, event, error }\n  }\n}\n\n// # CallTextArea\n\nfunction CallTextArea(props: CallProps) {\n  const { state, actions, event } = props\n  return (\n    <textarea\n      class=\"call-text-area\"\n      value={state.callOverviewText}\n      oninput={(e: Event) => {\n        actions.setCallOverviewText(e.target[\"value\"])\n      }}\n    />\n  )\n}\n\n// # CallTextAction\n\nfunction CallTextAction(props: CallProps) {\n  const { state, actions, event, args, error } = props\n  return (\n    <div class=\"call-text-action\">\n      {error ? <div class=\"call-text-error\">{error}</div> : <div />}\n      <button\n        onclick={() => {\n          actions.execute({\n            type: event.type,\n            name: event.name,\n            runId: state.selectedEvent.runId,\n            args\n          })\n        }}\n        disabled={!!error}\n      >\n        Execute\n      </button>\n    </div>\n  )\n}\n\n// # ResultPane\n\nfunction ResultPane(props: CallProps) {\n  const { state, actions, event } = props\n\n  function expanded(path: string, expanded?: boolean) {\n    const result = isValueDisplayExpanded(state, path)\n    if (typeof expanded === \"boolean\") {\n      actions.setDetailsPaneExpanded({\n        expanded: !result,\n        path\n      })\n    }\n\n    return result\n  }\n\n  return (\n    <div class=\"result-pane scrollable\">\n      {ObjectView({ value: event.result, expanded })}\n    </div>\n  )\n}\n\n// # CallOverviewDetailsPane\n\nexport interface CallOverviewDetailsPaneProps {\n  state: State\n  actions: Actions\n  event: ActionEvent | FunctionEvent\n}\n\nexport function CallOverviewDetailsPane(props: CallOverviewDetailsPaneProps) {\n  const { state, actions, event } = props\n\n  const callProps = getCallProps(props)\n  return (\n    <div class=\"object-details-pane scrollable\">\n      <div class=\"scrollable-content call-overview-details-pane\">\n        <section class=\"call-section\">\n          <h3>Call</h3>\n          {CallTextArea(callProps)}\n          {CallTextAction(callProps)}\n        </section>\n        <section class=\"response-section\">\n          <h3>Response</h3>\n          {ResultPane(callProps)}\n        </section>\n      </div>\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { ObjectView } from \"./ObjectView\"\nimport { State, Actions, Run, AppEvent } from \"../api\"\nimport { getSelectedEvent, isValueDisplayExpanded } from \"../selectors\"\nimport { CallOverviewDetailsPane } from \"./CallOverviewDetailsPane\"\n\nimport \"./ObjectDetailsPane.scss\"\n\ninterface PaneProps {\n  state: State\n  actions: Actions\n  event: AppEvent\n}\n\nfunction Pane(props: PaneProps, value: any) {\n  const { state, actions, event } = props\n\n  function expanded(path: string, expanded?: boolean) {\n    const result = isValueDisplayExpanded(state, path)\n    if (typeof expanded === \"boolean\") {\n      actions.setDetailsPaneExpanded({\n        expanded: !result,\n        path\n      })\n    }\n\n    return result\n  }\n\n  return (\n    <div class=\"object-details-pane scrollable\">\n      {ObjectView({ value, expanded })}\n    </div>\n  )\n}\n\nfunction ErrorPane(props: PaneProps, error: any) {\n  if (error instanceof Error) {\n    return (\n      <div class=\"object-details-pane scrollable\">\n        <pre>{error.stack}</pre>\n      </div>\n    )\n  }\n  if (typeof error === \"string\") {\n    return (\n      <div class=\"object-details-pane scrollable\">\n        <pre>{error}</pre>\n      </div>\n    )\n  }\n  return Pane(props, error)\n}\n\nfunction PaneData(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"action\") {\n    return Pane(props, event.data)\n  }\n  throw new Error(`Expected action event but got: ${event.type}`)\n}\n\nfunction PaneResult(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"action\") {\n    if (event.error) {\n      return ErrorPane(props, event.error)\n    }\n    return Pane(props, event.result)\n  }\n  if (event.type === \"function\") {\n    if (event.error) {\n      return ErrorPane(props, event.error)\n    }\n    return Pane(props, event.result)\n  }\n  throw new Error(`Expected action or function event but got: ${event.type}`)\n}\n\nfunction PaneState(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"action\") {\n    return Pane(props, event.stateAfter)\n  }\n  if (event.type === \"init\") {\n    return Pane(props, event.state)\n  }\n  throw new Error(`Expected action or init event but got: ${event.type}`)\n}\n\nfunction PaneArgs(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"function\") {\n    return Pane(props, event.args)\n  }\n  throw new Error(`Expected function event but got: ${event.type}`)\n}\n\nfunction PaneMessage(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"message\") {\n    return Pane(props, event.message)\n  }\n  throw new Error(`Expected message event but got: ${event.type}`)\n}\n\nfunction PaneDebuggerState(props: PaneProps) {\n  return Pane(props, props.state)\n}\n\nexport interface ObjectDetailsPaneProps {\n  state: State\n  actions: Actions\n}\n\nexport function ObjectDetailsPane(props: ObjectDetailsPaneProps) {\n  const { state, actions } = props\n  const event = getSelectedEvent(props.state)\n  switch (props.state.valueDisplay) {\n    case \"args\":\n      return PaneArgs({ state, actions, event })\n    case \"data\":\n      return PaneData({ state, actions, event })\n    case \"result\":\n      return PaneResult({ state, actions, event })\n    case \"message\":\n      return PaneMessage({ state, actions, event })\n    case \"state\":\n      return PaneState({ state, actions, event })\n    case \"call-overview\":\n      return CallOverviewDetailsPane({ state, actions, event: event as any })\n    case \"debugger-state\":\n      return PaneDebuggerState({ state, actions, event })\n  }\n}\n","import { h } from \"hyperapp\"\n\nimport \"./RunEvent.scss\"\n\nimport { State, Actions, Run, AppEvent } from \"../api\"\nimport { isSelectedEvent } from \"../selectors\"\nimport { RunEventList } from \"./RunEventList\"\nimport { truncate } from \"../utils\"\nimport { Icon } from \"./Icon\"\n\n// # Helpers\n\nfunction getRepeatText(run: Run, events: string[], index: number): string {\n  const event = run.eventsById[events[index]]\n  let result = 1\n  let i = index - 1\n  while (i >= 0) {\n    const previous = run.eventsById[events[i]]\n    if (previous.name === event.name && previous.type === event.type) {\n      result++\n      i--\n    } else {\n      return result === 1 ? \"\" : \" (x\" + result + \")\"\n    }\n  }\n  return result === 1 ? \"\" : \" (x\" + result + \")\"\n}\n\nfunction getArgumentText(arg: any): string {\n  if (\n    arg &&\n    typeof arg === \"object\" &&\n    arg.constructor &&\n    arg.constructor.name !== \"Object\"\n  ) {\n    return arg.constructor.name\n  }\n  return JSON.stringify(arg)\n}\n\nconst MAX_LENGTH = 20\n\nfunction getArgumentsText(args: any[]): string {\n  let result = \"\"\n  for (let i = 0; i < args.length; i++) {\n    const arg = args[i]\n    const text = (result +=\n      getArgumentText(arg) + (i < args.length - 1 ? \", \" : \"\"))\n\n    if (result.length === MAX_LENGTH) {\n      return result\n    } else if (result.length > MAX_LENGTH) {\n      return result.substring(0, MAX_LENGTH - 3) + \"...\"\n    }\n  }\n  return result\n}\n\nfunction getDisplayName(event: AppEvent): string {\n  switch (event.type) {\n    case \"init\":\n      return \"Initial State\"\n    case \"action\":\n      return `${event.name}(${getArgumentsText(\n        typeof event.data === \"undefined\" ? [] : [event.data]\n      )})`\n    case \"function\":\n      return `f ${event.name}(${getArgumentsText(event.args)})`\n    case \"message\":\n      return `[${event.level}] ${truncate(event.message)}`\n  }\n}\n\nfunction getEventClass(event: AppEvent): string {\n  switch (event.type) {\n    case \"init\":\n      return \"\"\n    case \"action\":\n    case \"function\":\n      return event.error ? \"error\" : \"\"\n    case \"message\":\n      return event.level\n  }\n}\n\n// # ToggleActionItem\n\ninterface ToggleEventProps {\n  actions: Actions\n  run: Run\n  event: AppEvent\n}\n\nfunction ToggleEvent(props: ToggleEventProps) {\n  const { actions, run, event } = props\n\n  if (!event.children || event.children.length === 0) {\n    return <Icon name=\"empty\" />\n  }\n\n  const onclick = (e: Event) => {\n    e.stopPropagation()\n    e.preventDefault()\n    actions.toggleEvent({ runId: run.id, eventId: event.id })\n  }\n\n  if (event.collapsed) {\n    return <Icon name=\"caret-right\" onclick={onclick} />\n  }\n\n  return <Icon name=\"caret-bottom\" onclick={onclick} />\n}\n\ninterface EventLinkProps {\n  state: State\n  actions: Actions\n  run: Run\n  event: AppEvent\n  events: string[]\n  indexInList: number\n}\n\nfunction EventLink(props: EventLinkProps) {\n  const { state, actions, run, events, indexInList, event } = props\n\n  const selected = isSelectedEvent(state, event)\n  const className = \"item-link\" + (selected ? \" selected\" : \"\")\n\n  const onclick = e => {\n    e.preventDefault()\n    actions.select({ runId: run.id, eventId: event.id })\n  }\n\n  return (\n    <a href=\"\" class={className} onclick={onclick}>\n      {ToggleEvent(props)}\n      <span class={getEventClass(event)}>{getDisplayName(event)}</span>\n      {state.collapseRepeatingEvents && (\n        <span class=\"run-event-count\">\n          {getRepeatText(run, events, indexInList)}\n        </span>\n      )}\n    </a>\n  )\n}\n\n// # RunActionItem Component\n\nexport interface RunEventProps {\n  state: State\n  actions: Actions\n  run: Run\n  event: AppEvent\n  events: string[]\n  indexInList: number\n}\n\nexport function RunEvent(props: RunEventProps) {\n  const { state, actions, run, events, indexInList, event } = props\n\n  const nextEvent = run.eventsById[events[indexInList + 1]]\n  if (\n    nextEvent &&\n    nextEvent.name === event.name &&\n    nextEvent.type === event.type &&\n    state.collapseRepeatingEvents\n  ) {\n    return null\n  }\n\n  return (\n    <li class=\"run-event\" key={indexInList}>\n      {EventLink(props)}\n      {event.children &&\n        !event.collapsed &&\n        RunEventList({\n          state,\n          actions,\n          run,\n          events: event.children\n        })}\n    </li>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions, Run } from \"../api\"\nimport { RunEvent } from \"./RunEvent\"\n\nimport \"./RunEventList.scss\"\n\n// # Component\n\nexport interface RunEventListProps {\n  state: State\n  actions: Actions\n  run: Run\n  events: string[]\n}\n\nexport function RunEventList(props: RunEventListProps) {\n  const { state, actions, run, events } = props\n  if (events.length === 0) {\n    return null\n  }\n\n  return (\n    <ul class=\"run-event-list\">\n      {events\n        .map((event, indexInList) => {\n          return RunEvent({\n            state,\n            actions,\n            events: run.events,\n            event: run.eventsById[event],\n            indexInList,\n            run\n          })\n        })\n        .reverse()}\n    </ul>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./RunsPane.scss\"\n\nimport { State, Actions, Run } from \"../api\"\nimport { RunsPaneItem } from \"./RunsPaneItem\"\n\nexport interface RunsPaneProps {\n  state: State\n  actions: Actions\n  runs: Run[]\n}\n\nexport function RunsPane(props: RunsPaneProps) {\n  const { state, actions, runs } = props\n  const items = []\n  const lastId = runs.length - 1\n  runs.forEach((run, i) => {\n    items.unshift(\n      RunsPaneItem({ state, actions, run, current: i === lastId })\n    )\n  })\n  return (\n    <div class=\"runs-pane scrollable\">\n      <ul class=\"runs-pane-runs scrollable-content\">{items}</ul>\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./RunsPaneItem.scss\"\n\nimport { State, Actions, Run } from \"../api\"\nimport { RunEventList } from \"./RunEventList\"\n\nexport interface RunsPaneItemProps {\n  state: State\n  actions: Actions\n  run: Run\n  current: boolean\n}\n\nexport function RunsPaneItem(props: RunsPaneItemProps) {\n  const { state, actions, run, current } = props\n  const date = new Date(run.timestamp).toLocaleTimeString()\n  const collapsed = run.collapsed\n\n  return (\n    <li class=\"run-pane-item\" key={run.timestamp}>\n      <h2>Run - {date}</h2>\n      {!collapsed &&\n        RunEventList({\n          run,\n          state,\n          actions,\n          events: run.events\n        })}\n    </li>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions, PaneDisplay } from \"../api\"\n\nimport { DebuggerOptions } from \"./DebuggerOptions\"\nimport { DebugPaneToolbar } from \"./DebugPaneToolbar\"\nimport { DebugPaneContent } from \"./DebugPaneContent\"\n\nimport \"./DebugPane.scss\"\n\nexport interface DebugPaneProps {\n  state: State\n  actions: Actions\n}\n\nexport function DebugPane(props: DebugPaneProps) {\n  const { state, actions } = props\n\n  return (\n    <div class=\"hyperapp-devtools debug-pane\">\n      {DebugPaneToolbar({ state, actions })}\n      {DebuggerOptions({ state, actions })}\n      {DebugPaneContent({ state, actions })}\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./DebugPaneContent.scss\"\n\nimport { State, Actions } from \"../api\"\nimport { ObjectDetailsPane } from \"./ObjectDetailsPane\"\nimport { RunsPane } from \"./RunsPane\"\n\nexport interface DebugPaneContentProps {\n  state: State\n  actions: Actions\n}\n\nexport function DebugPaneContent(props: DebugPaneContentProps) {\n  const { state, actions } = props\n\n  const runs = state.runs.map(id => state.runsById[id])\n  if (runs.length === 0) {\n    return (\n      <div class=\"debug-pane-content\">\n        <p>No debug information found, please debug this project.</p>\n      </div>\n    )\n  }\n  return (\n    <div class=\"debug-pane-content\">\n      {RunsPane({ state, actions, runs })}\n      {ObjectDetailsPane({ state, actions })}\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./DebugPaneToolbar.scss\"\n\nimport { State, Actions } from \"../api\"\nimport { canTravelToSelectedEvent } from \"../selectors\"\nimport { Icon } from \"./Icon\"\n\nexport interface DebugPaneToolbarProps {\n  state: State\n  actions: Actions\n}\n\nexport function DebugPaneToolbar(props: DebugPaneToolbarProps) {\n  const { state, actions } = props\n\n  return (\n    <div class=\"debug-pane-toolbar\">\n      <span class=\"toolbar-section view-buttons\">\n        <button\n          class={state.paneDisplay === \"fullscreen\" ? \"selected\" : \"\"}\n          onclick={() => actions.setPaneDisplay(\"fullscreen\")}\n        >\n          Full Screen\n        </button>\n        <button\n          class={state.paneDisplay === \"right\" ? \"selected\" : \"\"}\n          onclick={() => actions.setPaneDisplay(\"right\")}\n        >\n          Right\n        </button>\n        <button\n          class={state.paneDisplay === \"bottom\" ? \"selected\" : \"\"}\n          onclick={() => actions.setPaneDisplay(\"bottom\")}\n        >\n          Bottom\n        </button>\n      </span>\n      <span class=\"toolbar-section travel-button\">\n        <button\n          onclick={() => actions.timeTravel(state.selectedEvent)}\n          disabled={!canTravelToSelectedEvent(state)}\n        >\n          Travel to Action\n        </button>\n      </span>\n      <span class=\"toolbar-section close-button\">\n        <Icon name=\"cross\" onclick={() => actions.showPane(false)} />\n      </span>\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions } from \"../api\"\n\nimport \"./TogglePaneButton.scss\"\n\nexport interface TogglePaneButtonProps {\n  state: State\n  actions: Actions\n}\n\nexport function TogglePaneButton(props: TogglePaneButtonProps) {\n  const { state, actions } = props\n\n  return (\n    <div class=\"hyperapp-devtools toggle-pane-button\">\n      <button onclick={() => actions.showPane(!state.paneShown)}>\n        Devtools\n      </button>\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions, PaneDisplay } from \"./api\"\nimport { DebugPane, TogglePaneButton } from \"./components\"\n\nfunction getClassName(display: PaneDisplay): string {\n  switch (display) {\n    case \"fullscreen\":\n      return \"devtools-overlay\"\n    case \"right\":\n      return \"devtools-overlay align-right\"\n    case \"bottom\":\n      return \"devtools-overlay align-bottom\"\n  }\n}\n\nexport function view(state: State, actions: Actions) {\n  if (state.paneShown) {\n    return (\n      <div class={getClassName(state.paneDisplay)}>\n        {DebugPane({ state, actions })}\n        {TogglePaneButton({ state, actions })}\n      </div>\n    )\n  }\n  return TogglePaneButton({ state, actions })\n}\n","import { State } from \"./api\"\n\nexport const state: State = {\n  runs: [],\n  runsById: {},\n  paneDisplay: \"right\",\n  valueDisplay: \"state\",\n  paneShown: false,\n  selectedEvent: null,\n  collapseRepeatingEvents: true,\n  detailsPaneExpandedPaths: {}\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\n * Path: Array<string | number>\n */\nexport type Path = Array<string | number>\n\n/**\n * Get the value at the given path in the given target, or undefined if path doesn't exists.\n */\nexport function get<T = any, R = any>(target: T, path: Path): R {\n  let result: any = target\n  for (var i = 0; i < path.length; i++) {\n    result = result ? result[path[i]] : result\n  }\n  return result as R\n}\n\n/**\n * Immutable set: set the value at the given path in the given target and returns a new target.\n * Creates the necessary objects/arrays if the path doesn't exist.\n */\nexport function set<T = any, V = any, R = any>(\n  target: T,\n  path: Path,\n  value: V\n): R {\n  if (path.length === 0) {\n    return (value as any) as R\n  }\n  return assign(Array.isArray(target) ? [] : {}, target, {\n    [path[0]]:\n      path.length > 1 ? set(target[path[0]] || {}, path.slice(1), value) : value\n  })\n}\n\n/**\n * Immutable merge: merges the given value and the existing value (if any) at the path in the target using Object.assign() and return a new target.\n * Creates the necessary objects/arrays if the path doesn't exist.\n */\nexport function merge<T = any, V = any, R = any>(\n  target: T,\n  path: Path,\n  value: V\n): R {\n  return set(\n    target,\n    path,\n    assign(Array.isArray(value) ? [] : {}, get(target, path), value)\n  )\n}\n\nfunction assign(target: any, obj: any, obj2: any): any {\n  for (let i in obj) {\n    target[i] = obj[i]\n  }\n  for (let i in obj2) {\n    target[i] = obj2[i]\n  }\n  return target\n}\n","import { StringMap } from \"./api\"\n\nconst FUNCTIONS: StringMap<any> = {}\n\nexport function registerDebuggedFunction(name: string, fn: any) {\n  if (FUNCTIONS[name]) {\n    throw new Error(\n      `There is already a function registered with name \"${name}\".`\n    )\n  }\n\n  FUNCTIONS[name] = fn\n}\n\nexport function isRegistered(name: string): boolean {\n  return !!FUNCTIONS[name]\n}\n\nexport function getRegistered(name: string): any {\n  const result = FUNCTIONS[name]\n  if (!result) throw new Error(`No function registered with name ${name}.`)\n  return result\n}\n","import * as api from \"../api\"\nimport { get } from \"../immutable\"\nimport { getRun } from \"../selectors\"\nimport { getRegistered } from \"../debuggedFunctions\"\n\nfunction executeAction(payload: api.ExecutePayload, state: api.State) {\n  const { runId, name, args } = payload\n\n  const run = getRun(state, runId)\n  const action = get(run.interop, name.split(\".\"))\n\n  if (!action) throw new Error(`No action found with name \"${name}\".`)\n\n  action(args[0])\n}\n\nfunction executeFunction(payload: api.ExecutePayload, state: api.State) {\n  const { name, args } = payload\n\n  const fn = getRegistered(name)\n  fn(...args)\n}\n\nexport const execute = (payload: api.ExecutePayload) => (state: api.State) => {\n  const { type } = payload\n\n  if (type === \"action\") {\n    executeAction(payload, state)\n  } else {\n    executeFunction(payload, state)\n  }\n}\n","import * as api from \"../api\"\nimport { getSelectedEvent, getCallText } from \"../selectors\"\nimport { sanitizeValueDisplay } from \"../valueDisplay\"\n\nfunction getCallOverviewText(state: api.State, event: api.AppEvent): string {\n  if (event.type === \"action\" || event.type === \"function\") {\n    return getCallText(event)\n  }\n  return state.callOverviewText\n}\n\nexport const select = (selectedEvent: api.SelectedEvent | null) => (\n  state: api.State\n): Partial<api.State> => {\n  const event = getSelectedEvent(state, selectedEvent)\n\n  return {\n    selectedEvent,\n    valueDisplay: sanitizeValueDisplay(state.valueDisplay, event),\n    callOverviewText: getCallOverviewText(state, event)\n  }\n}\n","import { h } from \"hyperapp\"\n\nimport { guid } from \"./utils\"\nimport { view } from \"./view\"\nimport { state } from \"./state\"\nimport { Actions } from \"./api\"\nimport * as actions from \"./actions\"\nimport enhanceActions from \"./enhanceActions\"\nimport { injectedSetState } from \"./api\"\n\n// Rewrite the view more permissive than HA to allow for multiple VNode implementations.\n// e.g. the one in HA 1.1.2 and the on in HA 1.2.5\nexport interface View {\n  (state: any, actions: any): any\n}\n\nexport interface HypperApp {\n  (state: any, actions: any, view: View, container: Element | null): any\n}\n\nlet devtoolsApp: Actions\n\nexport function getDevtoolsApp() {\n  return devtoolsApp\n}\n\nexport function devtools<App extends HypperApp>(app: App): App {\n  const div = document.createElement(\"div\")\n  document.body.appendChild(div)\n\n  devtoolsApp = app(state, actions, view, div)\n\n  return <App>function(state: any, actions: any, view, element) {\n    const runId = guid()\n\n    actions[injectedSetState] = function timeTravel(state) {\n      return state\n    }\n    actions = enhanceActions(devtoolsApp, runId, actions)\n\n    const interop: any = app(state, actions, view, element)\n\n    devtoolsApp.logInit({\n      runId,\n      state,\n      timestamp: new Date().getTime(),\n      interop\n    })\n\n    return interop\n  }\n}\nexport default devtools\n","export interface StringMap<V> {\n  [key: string]: V\n}\n\nexport type EventType = \"function\" | \"action\" | \"init\" | \"message\"\n\nexport type AppEvent = InitEvent | ActionEvent | FunctionEvent | MessageEvent\n\nexport interface BaseEvent {\n  id: string\n  type: EventType\n  name: string\n  children?: string[]\n  collapsed?: boolean\n  parent?: string\n}\n\nexport interface InitEvent extends BaseEvent {\n  type: \"init\"\n  state: any\n}\n\nexport interface ActionEvent extends BaseEvent {\n  type: \"action\"\n  data: any\n  result?: any\n  error?: any\n  stateBefore: any\n  stateAfter?: any\n}\n\nexport interface FunctionEvent extends BaseEvent {\n  type: \"function\"\n  args: any[]\n  result?: any\n  error?: any\n  returnedBy?: string\n}\n\nexport type LogLevel = \"info\" | \"warn\" | \"error\"\n\nexport interface MessageEvent extends BaseEvent {\n  type: \"message\"\n  level: LogLevel\n  message: any\n}\n\nexport interface Run {\n  id: string\n  events: string[]\n  eventsById: StringMap<AppEvent>\n  timestamp: number\n  collapsed: boolean\n  currentEvent?: string\n  currentState?: any\n  interop: any\n}\n\nexport interface SelectedEvent {\n  runId: string\n  eventId: string\n}\n\nexport type PaneDisplay = \"fullscreen\" | \"right\" | \"bottom\"\n\nexport type ValueDisplay =\n  | \"state\"\n  | \"result\"\n  | \"args\"\n  | \"message\"\n  | \"data\"\n  | \"call-overview\"\n  | \"debugger-state\"\n\nexport interface State {\n  runs: string[]\n  runsById: StringMap<Run>\n  selectedEvent: SelectedEvent | null\n  collapseRepeatingEvents: boolean\n  valueDisplay: ValueDisplay\n  detailsPaneExpandedPaths: StringMap<boolean>\n  paneDisplay: PaneDisplay\n  paneShown: boolean\n  callOverviewText?: string\n}\n\n// # Actions\n\nexport interface LogInitPayload {\n  runId: string\n  timestamp: number\n  state: any\n  interop: any\n}\n\nexport interface LogMessagePayload {\n  runId: string\n  eventId: string\n  level: LogLevel\n  message: any\n}\n\nexport interface LogCallStartPayload {\n  // use latest if not set.\n  runId?: string\n  eventId: string\n  type: \"function\" | \"action\"\n  name: string\n  args: any[]\n}\n\nexport interface LogCallEndPayload {\n  runId?: string\n  eventId: string\n  result?: any\n  error?: any\n}\n\nexport interface ToggleEventPayload {\n  runId: string\n  eventId: string\n}\n\nexport interface SetDetailsPaneExpandedPayload {\n  path: string\n  expanded: boolean\n}\n\nexport interface ExecutePayload {\n  type: \"function\" | \"action\"\n  runId?: string\n  name: string\n  args: any[]\n}\n\nexport interface Actions {\n  logInit(payload: LogInitPayload)\n  logMessage(payload: LogMessagePayload)\n  logCallStart(payload: LogCallStartPayload)\n  logCallEnd(payload: LogCallEndPayload)\n  toggleRun(run: string)\n  toggleEvent(payload: ToggleEventPayload)\n  toggleCollapseRepeatingEvents()\n  setDetailsPaneExpanded(payload: SetDetailsPaneExpandedPayload)\n  showPane(shown: boolean)\n  setPaneDisplay(paneDisplay: PaneDisplay)\n  setValueDisplay(valueDisplay: ValueDisplay)\n  select(action: SelectedEvent | null)\n  timeTravel(action: SelectedEvent)\n  execute(payload: ExecutePayload)\n  deleteRun(id: string)\n  setCallOverviewText(text: string)\n}\n\nexport const injectedSetState = \"$__SET_STATE\"\n","import * as api from \"../api\"\n\nexport const deleteRun = (id: string) => (\n  state: api.State\n): Partial<api.State> => {\n  const runsById = { ...state.runsById }\n  delete runsById[id]\n  const runs = state.runs.filter(s => s !== id)\n  return { runs, runsById }\n}\n","import * as api from \"../api\"\nimport { merge } from \"../immutable\"\nimport { getLatestRunId, getCallText } from \"../selectors\"\nimport { sanitizeValueDisplay } from \"../valueDisplay\"\n\nexport const logCallEnd = (payload: api.LogCallEndPayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId = getLatestRunId(state), eventId, result, error } = payload\n\n  const runsById = { ...state.runsById }\n  const run = { ...runsById[runId] }\n  runsById[runId] = run\n\n  run.eventsById = { ...run.eventsById }\n  const event = { ...run.eventsById[eventId] }\n  run.eventsById[eventId] = event\n  let valueDisplay = state.valueDisplay\n  // update the event\n  if (event.type === \"action\" || event.type === \"function\") {\n    if (result) {\n      event.result = result\n\n      if (event.type === \"action\" && !result.then) {\n        // update the run's current state\n        const path = event.name.split(\".\")\n        path.pop()\n        const stateAfter = merge(event.stateBefore, path, event.result)\n        event.stateAfter = stateAfter\n        run.currentState = stateAfter\n      }\n    }\n    if (error) {\n      event.error = error\n    }\n  }\n\n  // update the current event of the run\n  run.currentEvent =\n    eventId === run.currentEvent ? event.parent : run.currentEvent\n\n  const selectedEvent: api.SelectedEvent = {\n    runId: run.id,\n    eventId\n  }\n\n  valueDisplay = sanitizeValueDisplay(valueDisplay, event)\n  const callOverviewText = getCallText(event as any)\n\n  return { runsById, selectedEvent, valueDisplay, callOverviewText }\n}\n","import * as api from \"../api\"\nimport { getLatestRunId } from \"../selectors\"\n\nfunction getEvent(\n  state: api.State,\n  run: api.Run,\n  payload: api.LogCallStartPayload\n): api.AppEvent {\n  const { args, eventId, name, runId, type } = payload\n  if (type === \"action\") {\n    return {\n      type: \"action\",\n      id: eventId,\n      name,\n      data: args && args.length > 0 ? args[0] : undefined,\n      parent: run.currentEvent,\n      children: [],\n      collapsed: false,\n      stateBefore: run.currentState\n    }\n  }\n\n  return {\n    type: \"function\",\n    id: eventId,\n    name,\n    args,\n    children: [],\n    collapsed: false,\n    parent: run.currentEvent\n  }\n}\n\nexport const logCallStart = (payload: api.LogCallStartPayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId = getLatestRunId(state), eventId } = payload\n  const runsById = { ...state.runsById }\n  const run = { ...runsById[runId] }\n  runsById[runId] = run\n  run.eventsById[eventId] = getEvent(state, run, payload)\n  const parentId = run.currentEvent\n  if (parentId) {\n    // append the event to the parent\n    const parent = { ...run.eventsById[parentId] }\n    run.eventsById[parentId] = parent\n    parent.children = parent.children.concat(eventId)\n  } else {\n    // append the event to the run\n    run.events = run.events.concat(eventId)\n  }\n  run.currentEvent = eventId\n\n  return { runsById }\n}\n","import * as api from \"../api\"\n\nexport const logInit = (payload: api.LogInitPayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId, interop, timestamp } = payload\n  const runs = state.runs.concat(runId)\n  const runsById = { ...state.runsById }\n  const initEvent: api.InitEvent = {\n    id: runId,\n    type: \"init\",\n    name: \"Initial State\",\n    state: payload.state\n  }\n  runsById[runId] = {\n    id: runId,\n    events: [runId],\n    eventsById: { [runId]: initEvent },\n    currentState: payload.state,\n    timestamp,\n    interop,\n    collapsed: false\n  }\n  return {\n    runs,\n    runsById,\n    selectedEvent: {\n      runId,\n      eventId: runId\n    }\n  }\n}\n","import * as api from \"../api\"\n\nexport const logMessage = (payload: api.LogMessagePayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId, eventId, level, message } = payload\n\n  const runsById = { ...state.runsById }\n  const run = { ...runsById[runId] }\n  runsById[runId] = run\n  run.events = run.events.concat(eventId)\n  run.eventsById = {\n    ...run.eventsById,\n    [eventId]: {\n      type: \"message\",\n      level,\n      message,\n      name: level,\n      id: eventId,\n      parent: run.currentEvent\n    }\n  }\n\n  return {\n    runsById,\n    selectedEvent: {\n      runId,\n      eventId\n    }\n  }\n}\n","import * as api from \"../api\"\n\nexport const setCallOverviewText = (callOverviewText: string) => (\n  state: api.State\n): Partial<api.State> => {\n  return { callOverviewText }\n}\n","import * as api from \"../api\"\nimport { set } from \"../immutable\"\n\nexport const setDetailsPaneExpanded = (\n  payload: api.SetDetailsPaneExpandedPayload\n) => (state: api.State): Partial<api.State> => {\n  const { path, expanded } = payload\n  return {\n    detailsPaneExpandedPaths: {\n      ...state.detailsPaneExpandedPaths,\n      [path]: expanded\n    }\n  }\n}\n","import * as api from \"../api\"\n\nexport const setPaneDisplay = (paneDisplay: api.PaneDisplay) => (\n  state: api.State\n): Partial<api.State> => ({\n  paneDisplay\n})\n","import * as api from \"../api\"\n\nexport const setValueDisplay = (valueDisplay: api.ValueDisplay) => (\n  state: api.State\n): Partial<api.State> => ({\n  valueDisplay\n})\n","import * as api from \"../api\"\n\nexport const showPane = (paneShown: boolean) => (\n  state: api.State\n): Partial<api.State> => ({\n  paneShown\n})\n","import * as api from \"../api\"\nimport { getSelectedEvent, getRun } from \"../selectors\"\n\nexport const timeTravel = (selectedEvent: api.SelectedEvent) => (\n  state: api.State\n) => {\n  const run = getRun(state, selectedEvent.runId)\n  if (!run) {\n    return\n  }\n\n  const event = getSelectedEvent(state, selectedEvent)\n  if (event) {\n    if (event.type === \"action\" && event.stateAfter) {\n      run.interop[api.injectedSetState](event.stateAfter)\n      return\n    }\n    if (event.type === \"init\") {\n      run.interop[api.injectedSetState](event.state)\n    }\n  }\n}\n","import * as api from \"../api\"\n\nexport const toggleCollapseRepeatingEvents = () => (\n  state: api.State\n): Partial<api.State> => ({\n  collapseRepeatingEvents: !state.collapseRepeatingEvents\n})\n","import * as api from \"../api\"\nimport { get, set } from \"../immutable\"\n\nexport const toggleEvent = (payload: api.ToggleEventPayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId, eventId } = payload\n\n  // const collapsed = state.runsById[runId].eventsById[eventId].collapsed\n  const collapsed = get(state.runsById, [\n    runId,\n    \"eventsById\",\n    eventId,\n    \"collapsed\"\n  ])\n  // state.runsById[runId].eventsById[eventId].collapsed = !collapsed\n  return {\n    runsById: set(\n      state.runsById,\n      [runId, \"eventsById\", eventId, \"collapsed\"],\n      !collapsed\n    )\n  }\n}\n","import * as api from \"../api\"\n\nexport const toggleRun = (id: string) => (state: api.State) => {\n  const runsById = { ...state.runsById }\n  runsById[id] = { ...runsById[id], collapsed: !runsById[id].collapsed }\n  return { runsById }\n}\n","import { StringMap } from \"./api\"\nimport { getDevtoolsApp } from \"./devtools\"\nimport { guid } from \"./utils\"\nimport { registerDebuggedFunction } from \"./debuggedFunctions\"\n\nfunction debugWithoutRegistering<T extends Function = any>(\n  val: T,\n  name: string = \"(anonymous function)\"\n): T {\n  return <any>function(...args) {\n    const actions = getDevtoolsApp()\n    const eventId = guid()\n    if (actions) {\n      actions.logCallStart({\n        type: \"function\",\n        eventId,\n        name,\n        args\n      })\n    }\n\n    try {\n      const result = (<any>val)(...args)\n\n      if (actions) {\n        actions.logCallEnd({\n          eventId,\n          result\n        })\n      }\n\n      if (typeof result === \"function\") {\n        return debugWithoutRegistering(result)\n      }\n\n      return result\n    } catch (error) {\n      if (actions) {\n        actions.logCallEnd({\n          eventId,\n          error\n        })\n      }\n\n      throw error\n    }\n  }\n}\n\nexport function debug<T extends Function = any>(\n  nameOrValue: T | string,\n  value?: T\n): T {\n  const val = typeof nameOrValue === \"string\" ? value : nameOrValue\n  const name = typeof nameOrValue === \"string\" ? nameOrValue : nameOrValue.name\n  if (!name) {\n    throw new Error(\n      `Please provide a unique name: debug(\"myFn\", () => { ... } or use a named function.`\n    )\n  }\n\n  if (typeof val !== \"function\") {\n    throw new Error(`Can only debug a function but got ${typeof val}.`)\n  }\n\n  registerDebuggedFunction(name, val)\n\n  return debugWithoutRegistering(val, name)\n}\n","import { Actions } from \"./api\"\nimport { guid } from \"./utils\"\n\nexport function enhanceActions(\n  hoaActions: Actions,\n  runId: string,\n  actions: any,\n  prefix?: string\n): any {\n  const result = {}\n\n  const namespace = prefix ? prefix + \".\" : \"\"\n  Object.keys(actions || {}).forEach(name => {\n    var action = actions[name]\n    if (!action) {\n      result[name] = null\n      return\n    }\n\n    const fnName = action.name || name\n    const namedspacedName = namespace + fnName\n    if (typeof action === \"function\") {\n      result[name] = function(data) {\n        return function(state, actions) {\n          const eventId = guid()\n          hoaActions.logCallStart({\n            type: \"action\",\n            name: namedspacedName,\n            args: [data],\n            eventId,\n            runId\n          })\n          try {\n            let result = action(data)\n            result =\n              typeof result === \"function\" ? result(state, actions) : result\n\n            hoaActions.logCallEnd({\n              runId,\n              eventId,\n              result\n            })\n\n            return result\n          } catch (error) {\n            hoaActions.logCallEnd({\n              runId,\n              eventId,\n              error\n            })\n\n            throw error\n          }\n        }\n      }\n    } else {\n      result[name] = enhanceActions(hoaActions, runId, action, namedspacedName)\n    }\n  })\n\n  return result\n}\n\nexport default enhanceActions\n"],"names":["ALPHABET","rand","Math","floor","random","length","guid","Array","apply","map","join","h","name","attributes","rest","children","arguments","push","node","pop","nodeName","key","styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","state","path","expanded","detailsPaneExpandedPaths","split","runs","Error","runId","run","runsById","event","selectedEvent","eventsById","eventId","getLatestRunId","getSelectedEvent","stateAfter","currentState","getCallNameText","undefined","data","JSON","stringify","args","str","substring","getCallArgsText","ALLOWED_VALUE_DISPLAY","action","result","call-overview","debugger-state","function","init","message","VALUE_DISPLAYS","DEFAULT_VALUE_DISPLAYS","valueDisplay","LABELS","props","actions","class","id","checked","collapseRepeatingEvents","onchange","toggleCollapseRepeatingEvents","for","e","setValueDisplay","target","value","d","transform","xmlns","width","height","viewBox","onclick","CaretRight","Svg","CaretBottom","Cross","Empty","isArray","Wrap","Pair","classList","Switch","Expand","Collapse","i","Arr","keys","Object","Obj","ObjectView","error","text","prefix","startsWith","endsWith","parse","getArgsFromCallText","callOverviewText","callProps","getCallProps","oninput","setCallOverviewText","execute","disabled","isValueDisplayExpanded","setDetailsPaneExpanded","stack","Pane","PaneArgs","PaneData","ErrorPane","PaneResult","PaneMessage","PaneState","CallOverviewDetailsPane","MAX_LENGTH","arg","constructor","events","indexInList","href","selected","isSelectedEvent","preventDefault","select","Icon","stopPropagation","toggleEvent","collapsed","ToggleEvent","level","getEventClass","getArgumentsText","maxLength","substr","getDisplayName","index","previous","getRepeatText","nextEvent","EventLink","RunEventList","reverse","items","lastId","forEach","date","unshift","current","Date","timestamp","toLocaleTimeString","paneDisplay","setPaneDisplay","timeTravel","canTravelToSelectedEvent","showPane","DebuggerOptions","RunsPane","ObjectDetailsPane","paneShown","display","getClassName","DebugPane","TogglePaneButton","__assign","assign","t","s","n","p","prototype","hasOwnProperty","call","set","slice","obj","obj2","FUNCTIONS","payload","getRegistered","devtoolsApp","injectedSetState","filter","get","getRun","interop","executeAction","executeFunction","_a","then","stateBefore","currentEvent","parent","sanitizeValueDisplay","getCallText","parentId","parent_1","concat","initEvent","api.injectedSetState","val","_i","logCallStart","logCallEnd","debugWithoutRegistering","app","div","body","view","element","hoaActions","namespace","fnName","namedspacedName","result_1","enhanceActions","logInit","getTime","nameOrValue","fn","registerDebuggedFunction"],"mappings":"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"}