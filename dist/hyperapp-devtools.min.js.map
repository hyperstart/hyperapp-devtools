{"version":3,"file":"hyperapp-devtools.min.js","sources":["../src/utils.ts","../node_modules/hyperapp/src/index.js","../node_modules/style-inject/dist/style-inject.es.js","../src/selectors.ts","../src/valueDisplay.ts","../src/components/DebuggerOptions.tsx","../src/components/Icon.tsx","../src/components/ObjectView.js","../src/components/ObjectDetailsPane.tsx","../src/components/RunEvent.tsx","../src/components/RunEventList.tsx","../src/components/RunsPane.tsx","../src/components/RunsPaneItem.tsx","../src/components/DebugPane.tsx","../src/components/DebugPaneContent.tsx","../src/components/DebugPaneToolbar.tsx","../src/components/TogglePaneButton.tsx","../src/view.tsx","../src/state.ts","../node_modules/tslib/tslib.es6.js","../src/immutable.ts","../src/debuggedFunctions.ts","../src/actions/execute.ts","../src/actions/logCallStart.ts","../src/devtools.ts","../src/api.ts","../src/actions/deleteRun.ts","../src/actions/logCallEnd.ts","../src/actions/logInit.ts","../src/actions/logMessage.ts","../src/actions/select.ts","../src/actions/setDetailsPaneExpanded.ts","../src/actions/setPaneDisplay.ts","../src/actions/setValueDisplay.ts","../src/actions/showPane.ts","../src/actions/timeTravel.ts","../src/actions/toggleCollapseRepeatingEvents.ts","../src/actions/toggleEvent.ts","../src/actions/toggleRun.ts","../src/debug.ts","../src/enhanceActions.ts"],"sourcesContent":["const ALPHABET =\n  \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"\nconst SIZE = 16\nconst rand = () => ALPHABET[Math.floor(Math.random() * ALPHABET.length)]\n\nexport const guid = () =>\n  Array.apply(null, Array(SIZE))\n    .map(rand)\n    .join(\"\")\n\nexport function truncate(value: string, maxLength: number = 30): string {\n  if (value.length <= maxLength) {\n    return value\n  }\n  return value.substr(0, maxLength - 2) + \"...\"\n}\n","export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null ? node : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function set(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1 ? set(path.slice(1), value, source[path[0]]) : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function get(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(get(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = get(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = set(path, clone(state, result), globalState))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      for (var i in clone(oldValue, value)) {\n        var style = value == null || value[i] == null ? \"\" : value[i]\n        if (i[0] === \"-\") {\n          element[name].setProperty(i, style)\n        } else {\n          element[name][i] = style\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (name in element && name !== \"list\" && !isSvg) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { AppEvent, State, Run, SelectedEvent } from \"./api\"\nimport { get, Path } from \"./immutable\"\n\nexport function isValueDisplayExpanded(state: State, path: string): boolean {\n  const expanded = state.detailsPaneExpandedPaths[path]\n  if (typeof expanded === \"boolean\") {\n    return expanded\n  }\n  return path.split(\".\").length < 4\n}\n\nexport function getLatestRunId(state: State): string {\n  const runs = state.runs\n  if (runs.length > 0) {\n    return runs[runs.length - 1]\n  }\n  throw new Error(\"No run found.\")\n}\n\nexport function getRun(state: State, runId: string): Run {\n  const run = state.runsById[runId]\n  if (!run) throw new Error(`No run with id =${runId}`)\n  return run\n}\n\nexport function isSelectedEvent(state: State, event: AppEvent): boolean {\n  const selected = state.selectedEvent\n  if (!selected || !event) {\n    return false\n  }\n  const run = state.runsById[selected.runId]\n  return run && run.eventsById[selected.eventId] === event\n}\n\nexport function getSelectedEvent(\n  state: State,\n  event: SelectedEvent = state.selectedEvent\n): AppEvent | null {\n  if (!event) {\n    return null\n  }\n\n  return state.runsById[event.runId].eventsById[event.eventId]\n}\n\nexport function getLatestRun(state: State): Run {\n  return state.runsById[getLatestRunId(state)]\n}\n\nexport function canTravelToSelectedEvent(state: State): boolean {\n  const run = getLatestRun(state)\n  const event = getSelectedEvent(state)\n  if (!run || !event) {\n    return false\n  }\n\n  if (event.type === \"action\") {\n    return event.stateAfter && event.stateAfter !== run.currentState\n  }\n  if (event.type === \"init\") {\n    return event.state !== run.currentState\n  }\n  return false\n}\n","import { AppEvent, StringMap, ValueDisplay } from \"./api\"\n\ninterface AllowedValueDisplays {\n  [eventType: string]: StringMap<boolean>\n}\n\nconst ALLOWED_VALUE_DISPLAY: AllowedValueDisplays = {\n  action: {\n    state: true,\n    result: true,\n    data: true,\n    \"debugger-state\": true\n  },\n  function: {\n    args: true,\n    result: true,\n    \"debugger-state\": true\n  },\n  init: {\n    state: true,\n    \"debugger-state\": true\n  },\n  message: {\n    message: true,\n    \"debugger-state\": true\n  }\n}\n\nexport const VALUE_DISPLAYS: StringMap<string[]> = {\n  action: [\"state\", \"result\", \"data\", \"debugger-state\"],\n  function: [\"args\", \"result\", \"debugger-state\"],\n  init: [\"state\", \"debugger-state\"],\n  message: [\"message\", \"debugger-state\"]\n}\n\nconst DEFAULT_VALUE_DISPLAYS: StringMap<ValueDisplay> = {\n  action: \"state\",\n  function: \"result\",\n  init: \"state\",\n  message: \"message\"\n}\n\nexport function sanitizeValueDisplay(\n  valueDisplay: ValueDisplay,\n  event: AppEvent\n): ValueDisplay {\n  if (!ALLOWED_VALUE_DISPLAY[event.type][valueDisplay]) {\n    return DEFAULT_VALUE_DISPLAYS[event.type]\n  }\n\n  // for actions with error, select the result to show the error.\n  if (valueDisplay === \"state\" && event[\"error\"]) {\n    return \"result\"\n  }\n\n  return valueDisplay\n}\n","import { h } from \"hyperapp\"\n\nimport \"./DebuggerOptions.scss\"\n\nimport { State, Actions, StringMap } from \"../api\"\nimport { getSelectedEvent } from \"../selectors\"\nimport { VALUE_DISPLAYS } from \"../valueDisplay\"\n\nconst LABELS: StringMap<string> = {\n  state: \"Show full state\",\n  result: \"Show action or function result\",\n  args: \"Show function arguments\",\n  message: \"Show message\",\n  data: \"Show action data\",\n  \"debugger-state\": \"Show debugger full state (for debug only)\"\n}\n\nfunction ValueDisplaySelect(props: DebuggerOptionsProps) {\n  const { state, actions } = props\n  const event = getSelectedEvent(state)\n\n  return (\n    <select\n      onchange={e => actions.setValueDisplay(e.target.value)}\n      value={state.valueDisplay}\n    >\n      {VALUE_DISPLAYS[event.type].map(value => (\n        <option value={value}>{LABELS[value]}</option>\n      ))}\n    </select>\n  )\n}\n\nexport interface DebuggerOptionsProps {\n  state: State\n  actions: Actions\n}\n\nexport function DebuggerOptions(props: DebuggerOptionsProps) {\n  const { state, actions } = props\n\n  return (\n    <div class=\"debugger-options\">\n      <div class=\"option\">\n        <input\n          id=\"debugger-group-actions-cb\"\n          type=\"checkbox\"\n          checked={state.collapseRepeatingEvents}\n          onchange={actions.toggleCollapseRepeatingEvents}\n        />\n        <label for=\"debugger-group-actions-cb\">Group repeating actions</label>\n      </div>\n      <div class=\"option\">{ValueDisplaySelect(props)}</div>\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./Icon.scss\"\n\n// manually imported from open-iconic\n\ninterface SvgProps {\n  d: string\n  transform: string\n  class?: string\n}\n\nconst Svg = (d: string, transform: string) => (props: IconProps) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"8\"\n      height=\"8\"\n      viewBox=\"0 0 8 8\"\n      class={props.class || \"\"}\n      onclick={props.onclick}\n    >\n      <path d={d} transform={transform} />\n    </svg>\n  )\n}\n\nexport type IconName = \"caret-right\" | \"caret-bottom\" | \"cross\" | \"empty\"\n\nexport interface IconProps {\n  name: IconName\n  class?: string\n  onclick?: any\n}\n\nconst CaretRight = Svg(\"M0 0v8l4-4-4-4z\", \"translate(2)\")\nconst CaretBottom = Svg(\"M0 0l4 4 4-4h-8z\", \"translate(0 2)\")\nconst Cross = Svg(\n  \"M1.41 0l-1.41 1.41.72.72 1.78 1.81-1.78 1.78-.72.69 1.41 1.44.72-.72 1.81-1.81 1.78 1.81.69.72 1.44-1.44-.72-.69-1.81-1.78 1.81-1.81.72-.72-1.44-1.41-.69.72-1.78 1.78-1.81-1.78-.72-.72z\",\n  \"\"\n)\nconst Empty = Svg(\"\", \"\")\n\nexport function Icon(props: IconProps) {\n  switch (props.name) {\n    case \"caret-bottom\":\n      return CaretBottom(props)\n    case \"caret-right\":\n      return CaretRight(props)\n    case \"cross\":\n      return Cross(props)\n    case \"empty\":\n      return Empty(props)\n    default:\n      throw new Error(\"Invalid icon \" + props.name)\n  }\n}\n","// this file is taken from https://raw.githubusercontent.com/Mytrill/hyperapp-object-view\n// TODO: replace by the real hyperapp-object-view once Whaaley merge the PR :)\n\nimport \"./ObjectView.scss\"\n\nfunction h(nodeName, attributes, children) {\n  return {\n    nodeName: nodeName,\n    attributes: attributes,\n    children: Array.isArray(children) ? children : [children]\n  }\n}\n\nfunction Wrap(data, children) {\n  var key = data.key\n  return h(\"div\", { class: \"-row\" }, [\n    key && h(\"span\", { class: \"-key\" }, key),\n    children\n  ])\n}\n\nfunction Pair(data, classList) {\n  return Wrap(data, h(\"span\", { class: classList }, data.value + \"\"))\n}\n\nfunction Switch(data, path, expanded) {\n  var value = data.value\n  switch (typeof value) {\n    case \"boolean\":\n      return Pair(data, \"-boolean\")\n    case \"function\":\n      return Wrap(data, h(\"span\", { class: \"-function\" }))\n    case \"number\":\n      return Pair(data, \"-number\")\n    case \"object\":\n      return Wrap(\n        data,\n        value\n          ? Array.isArray(value)\n            ? Arr(value, path, expanded)\n            : Obj(value, path, expanded)\n          : h(\"span\", { class: \"-null\" })\n      )\n    case \"string\":\n      return Pair(data, \"-string\")\n    case \"undefined\":\n      return Wrap(data, h(\"span\", { class: \"-undefined\" }))\n  }\n  return Pair(data)\n}\n\nfunction Expand(path, expanded) {\n  return (\n    expanded &&\n    h(\"span\", {\n      class: \"-expand\",\n      onclick: function() {\n        expanded(path, true)\n      }\n    })\n  )\n}\n\nfunction Collapse(path, expanded) {\n  return (\n    expanded &&\n    h(\"span\", {\n      class: \"-collapse\",\n      onclick: function() {\n        expanded(path, false)\n      }\n    })\n  )\n}\n\nfunction Arr(value, path, expanded) {\n  if (expanded && !expanded(path)) {\n    return h(\"span\", { class: \"-array\" }, Expand(path, expanded))\n  }\n  var result = [Collapse(path, expanded)]\n  for (var i = 0; i < value.length; i++) {\n    result.push(Switch({ value: value[i] }, path + \".\" + i, expanded))\n  }\n  return h(\"span\", { class: \"-array\" }, result)\n}\n\nfunction Obj(value, path, expanded) {\n  if (expanded && !expanded(path)) {\n    return h(\"span\", { class: \"-object\" }, Expand(path, expanded))\n  }\n  var keys = Object.keys(value)\n  var result = [Collapse(path, expanded)]\n  // TODO later :)\n  // if (\n  //   value.constructor &&\n  //   value.constructor.name &&\n  //   value.constructor.name !== \"Object\"\n  // ) {\n  //   result.push(`${value.constructor.name} `)\n  // }\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i]\n    result.push(\n      Switch({ key: key, value: value[key] }, path + \".\" + key, expanded)\n    )\n  }\n  return h(\"span\", { class: \"-object\" }, result)\n}\n\nexport function ObjectView(props) {\n  props.path = props.path || \"root\"\n  return h(\n    \"div\",\n    { class: \"_object-view\" },\n    Switch(props, props.path, props.expanded)\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./ObjectDetailsPane.scss\"\n\nimport { ObjectView } from \"./ObjectView\"\n\nimport { State, Actions, Run, AppEvent } from \"../api\"\nimport { getSelectedEvent, isValueDisplayExpanded } from \"../selectors\"\n\ninterface PaneProps {\n  state: State\n  actions: Actions\n  event: AppEvent\n}\n\nfunction Pane(props: PaneProps, value: any) {\n  const { state, actions, event } = props\n\n  function expanded(path: string, expanded?: boolean) {\n    const result = isValueDisplayExpanded(state, path)\n    if (typeof expanded === \"boolean\") {\n      actions.setDetailsPaneExpanded({\n        expanded: !result,\n        path\n      })\n    }\n\n    return result\n  }\n\n  return (\n    <div class=\"object-details-pane scrollable\">\n      {ObjectView({ value, expanded })}\n    </div>\n  )\n}\n\nfunction ErrorPane(props: PaneProps, error: any) {\n  if (error instanceof Error) {\n    return (\n      <div class=\"object-details-pane scrollable\">\n        <pre>{error.stack}</pre>\n      </div>\n    )\n  }\n  if (typeof error === \"string\") {\n    return (\n      <div class=\"object-details-pane scrollable\">\n        <pre>{error}</pre>\n      </div>\n    )\n  }\n  return Pane(props, error)\n}\n\nfunction PaneData(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"action\") {\n    return Pane(props, event.data)\n  }\n  throw new Error(`Expected action event but got: ${event.type}`)\n}\n\nfunction PaneResult(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"action\") {\n    if (event.error) {\n      return ErrorPane(props, event.error)\n    }\n    return Pane(props, event.result)\n  }\n  if (event.type === \"function\") {\n    if (event.error) {\n      return ErrorPane(props, event.error)\n    }\n    return Pane(props, event.result)\n  }\n  throw new Error(`Expected action or function event but got: ${event.type}`)\n}\n\nfunction PaneState(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"action\") {\n    return Pane(props, event.stateAfter)\n  }\n  if (event.type === \"init\") {\n    return Pane(props, event.state)\n  }\n  throw new Error(`Expected action or init event but got: ${event.type}`)\n}\n\nfunction PaneArgs(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"function\") {\n    return Pane(props, event.args)\n  }\n  throw new Error(`Expected function event but got: ${event.type}`)\n}\n\nfunction PaneMessage(props: PaneProps) {\n  const event = props.event\n  if (event.type === \"message\") {\n    return Pane(props, event.message)\n  }\n  throw new Error(`Expected message event but got: ${event.type}`)\n}\n\nfunction PaneDebuggerState(props: PaneProps) {\n  return Pane(props, props.state)\n}\n\nexport interface ObjectDetailsPaneProps {\n  state: State\n  actions: Actions\n}\n\nexport function ObjectDetailsPane(props: ObjectDetailsPaneProps) {\n  const { state, actions } = props\n  const event = getSelectedEvent(props.state)\n  switch (props.state.valueDisplay) {\n    case \"args\":\n      return PaneArgs({ state, actions, event })\n    case \"data\":\n      return PaneData({ state, actions, event })\n    case \"result\":\n      return PaneResult({ state, actions, event })\n    case \"message\":\n      return PaneMessage({ state, actions, event })\n    case \"state\":\n      return PaneState({ state, actions, event })\n    case \"debugger-state\":\n      return PaneDebuggerState({ state, actions, event })\n  }\n}\n","import { h } from \"hyperapp\"\n\nimport \"./RunEvent.scss\"\n\nimport { State, Actions, Run, AppEvent } from \"../api\"\nimport { isSelectedEvent } from \"../selectors\"\nimport { RunEventList } from \"./RunEventList\"\nimport { truncate } from \"../utils\"\nimport { Icon } from \"./Icon\"\n\n// # Helpers\n\nfunction getRepeatText(run: Run, events: string[], index: number): string {\n  const event = run.eventsById[events[index]]\n  let result = 1\n  let i = index - 1\n  while (i >= 0) {\n    const previous = run.eventsById[events[i]]\n    if (previous.name === event.name && previous.type === event.type) {\n      result++\n      i--\n    } else {\n      return result === 1 ? \"\" : \" (x\" + result + \")\"\n    }\n  }\n  return result === 1 ? \"\" : \" (x\" + result + \")\"\n}\n\nfunction getArgumentText(arg: any): string {\n  if (\n    arg &&\n    typeof arg === \"object\" &&\n    arg.constructor &&\n    arg.constructor.name !== \"Object\"\n  ) {\n    return arg.constructor.name\n  }\n  return JSON.stringify(arg)\n}\n\nconst MAX_LENGTH = 20\n\nfunction getArgumentsText(args: any[]): string {\n  let result = \"\"\n  for (let i = 0; i < args.length; i++) {\n    const arg = args[i]\n    const text = (result +=\n      getArgumentText(arg) + (i < args.length - 1 ? \", \" : \"\"))\n\n    if (result.length === MAX_LENGTH) {\n      return result\n    } else if (result.length > MAX_LENGTH) {\n      return result.substring(0, MAX_LENGTH - 3) + \"...\"\n    }\n  }\n  return result\n}\n\nfunction getDisplayName(event: AppEvent): string {\n  switch (event.type) {\n    case \"init\":\n      return \"Initial State\"\n    case \"action\":\n      return `${event.name}(${getArgumentsText(\n        typeof event.data === \"undefined\" ? [] : [event.data]\n      )})`\n    case \"function\":\n      return `f ${event.name}(${getArgumentsText(event.args)})`\n    case \"message\":\n      return `[${event.level}] ${truncate(event.message)}`\n  }\n}\n\nfunction getEventClass(event: AppEvent): string {\n  switch (event.type) {\n    case \"init\":\n      return \"\"\n    case \"action\":\n    case \"function\":\n      return event.error ? \"error\" : \"\"\n    case \"message\":\n      return event.level\n  }\n}\n\n// # ToggleActionItem\n\ninterface ToggleEventProps {\n  actions: Actions\n  run: Run\n  event: AppEvent\n}\n\nfunction ToggleEvent(props: ToggleEventProps) {\n  const { actions, run, event } = props\n\n  if (!event.children || event.children.length === 0) {\n    return <Icon name=\"empty\" />\n  }\n\n  const onclick = (e: Event) => {\n    e.stopPropagation()\n    e.preventDefault()\n    actions.toggleEvent({ runId: run.id, eventId: event.id })\n  }\n\n  if (event.collapsed) {\n    return <Icon name=\"caret-right\" onclick={onclick} />\n  }\n\n  return <Icon name=\"caret-bottom\" onclick={onclick} />\n}\n\ninterface EventLinkProps {\n  state: State\n  actions: Actions\n  run: Run\n  event: AppEvent\n  events: string[]\n  indexInList: number\n}\n\nfunction EventLink(props: EventLinkProps) {\n  const { state, actions, run, events, indexInList, event } = props\n\n  const selected = isSelectedEvent(state, event)\n  const className = \"item-link\" + (selected ? \" selected\" : \"\")\n\n  const onclick = e => {\n    e.preventDefault()\n    actions.select({ runId: run.id, eventId: event.id })\n  }\n\n  return (\n    <a href=\"\" class={className} onclick={onclick}>\n      {ToggleEvent(props)}\n      <span class={getEventClass(event)}>{getDisplayName(event)}</span>\n      {state.collapseRepeatingEvents && (\n        <span class=\"run-event-count\">\n          {getRepeatText(run, events, indexInList)}\n        </span>\n      )}\n    </a>\n  )\n}\n\n// # RunActionItem Component\n\nexport interface RunEventProps {\n  state: State\n  actions: Actions\n  run: Run\n  event: AppEvent\n  events: string[]\n  indexInList: number\n}\n\nexport function RunEvent(props: RunEventProps) {\n  const { state, actions, run, events, indexInList, event } = props\n\n  const nextEvent = run.eventsById[events[indexInList + 1]]\n  if (\n    nextEvent &&\n    nextEvent.name === event.name &&\n    nextEvent.type === event.type &&\n    state.collapseRepeatingEvents\n  ) {\n    return null\n  }\n\n  return (\n    <li class=\"run-event\" key={indexInList}>\n      {EventLink(props)}\n      {event.children &&\n        !event.collapsed &&\n        RunEventList({\n          state,\n          actions,\n          run,\n          events: event.children\n        })}\n    </li>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions, Run } from \"../api\"\nimport { RunEvent } from \"./RunEvent\"\n\nimport \"./RunEventList.scss\"\n\n// # Component\n\nexport interface RunEventListProps {\n  state: State\n  actions: Actions\n  run: Run\n  events: string[]\n}\n\nexport function RunEventList(props: RunEventListProps) {\n  const { state, actions, run, events } = props\n  if (events.length === 0) {\n    return null\n  }\n\n  return (\n    <ul class=\"run-event-list\">\n      {events\n        .map((event, indexInList) => {\n          return RunEvent({\n            state,\n            actions,\n            events: run.events,\n            event: run.eventsById[event],\n            indexInList,\n            run\n          })\n        })\n        .reverse()}\n    </ul>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./RunsPane.scss\"\n\nimport { State, Actions, Run } from \"../api\"\nimport { RunsPaneItem } from \"./RunsPaneItem\"\n\nexport interface RunsPaneProps {\n  state: State\n  actions: Actions\n  runs: Run[]\n}\n\nexport function RunsPane(props: RunsPaneProps) {\n  const { state, actions, runs } = props\n  const items = []\n  const lastId = runs.length - 1\n  runs.forEach((run, i) => {\n    items.unshift(\n      RunsPaneItem({ state, actions, run, current: i === lastId })\n    )\n  })\n  return (\n    <div class=\"runs-pane scrollable\">\n      <ul class=\"runs-pane-runs scrollable-content\">{items}</ul>\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./RunsPaneItem.scss\"\n\nimport { State, Actions, Run } from \"../api\"\nimport { RunEventList } from \"./RunEventList\"\n\nexport interface RunsPaneItemProps {\n  state: State\n  actions: Actions\n  run: Run\n  current: boolean\n}\n\nexport function RunsPaneItem(props: RunsPaneItemProps) {\n  const { state, actions, run, current } = props\n  const date = new Date(run.timestamp).toLocaleTimeString()\n  const collapsed = run.collapsed\n\n  return (\n    <li class=\"run-pane-item\" key={run.timestamp}>\n      <h2>Run - {date}</h2>\n      {!collapsed &&\n        RunEventList({\n          run,\n          state,\n          actions,\n          events: run.events\n        })}\n    </li>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions, PaneDisplay } from \"../api\"\n\nimport { DebuggerOptions } from \"./DebuggerOptions\"\nimport { DebugPaneToolbar } from \"./DebugPaneToolbar\"\nimport { DebugPaneContent } from \"./DebugPaneContent\"\n\nimport \"./DebugPane.scss\"\n\nexport interface DebugPaneProps {\n  state: State\n  actions: Actions\n}\n\nexport function DebugPane(props: DebugPaneProps) {\n  const { state, actions } = props\n\n  return (\n    <div class=\"hyperapp-devtools debug-pane\">\n      {DebugPaneToolbar({ state, actions })}\n      {DebuggerOptions({ state, actions })}\n      {DebugPaneContent({ state, actions })}\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./DebugPaneContent.scss\"\n\nimport { State, Actions } from \"../api\"\nimport { ObjectDetailsPane } from \"./ObjectDetailsPane\"\nimport { RunsPane } from \"./RunsPane\"\n\nexport interface DebugPaneContentProps {\n  state: State\n  actions: Actions\n}\n\nexport function DebugPaneContent(props: DebugPaneContentProps) {\n  const { state, actions } = props\n\n  const runs = state.runs.map(id => state.runsById[id])\n  if (runs.length === 0) {\n    return (\n      <div class=\"debug-pane-content\">\n        <p>No debug information found, please debug this project.</p>\n      </div>\n    )\n  }\n  return (\n    <div class=\"debug-pane-content\">\n      {RunsPane({ state, actions, runs })}\n      {ObjectDetailsPane({ state, actions })}\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport \"./DebugPaneToolbar.scss\"\n\nimport { State, Actions } from \"../api\"\nimport { canTravelToSelectedEvent } from \"../selectors\"\nimport { Icon } from \"./Icon\"\n\nexport interface DebugPaneToolbarProps {\n  state: State\n  actions: Actions\n}\n\nexport function DebugPaneToolbar(props: DebugPaneToolbarProps) {\n  const { state, actions } = props\n\n  return (\n    <div class=\"debug-pane-toolbar\">\n      <span class=\"toolbar-section view-buttons\">\n        <button\n          class={state.paneDisplay === \"fullscreen\" ? \"selected\" : \"\"}\n          onclick={() => actions.setPaneDisplay(\"fullscreen\")}\n        >\n          Full Screen\n        </button>\n        <button\n          class={state.paneDisplay === \"right\" ? \"selected\" : \"\"}\n          onclick={() => actions.setPaneDisplay(\"right\")}\n        >\n          Right\n        </button>\n        <button\n          class={state.paneDisplay === \"bottom\" ? \"selected\" : \"\"}\n          onclick={() => actions.setPaneDisplay(\"bottom\")}\n        >\n          Bottom\n        </button>\n      </span>\n      <span class=\"toolbar-section travel-button\">\n        <button\n          onclick={() => actions.timeTravel(state.selectedEvent)}\n          disabled={!canTravelToSelectedEvent(state)}\n        >\n          Travel to Action\n        </button>\n      </span>\n      <span class=\"toolbar-section close-button\">\n        <Icon name=\"cross\" onclick={() => actions.showPane(false)} />\n      </span>\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions } from \"../api\"\n\nimport \"./TogglePaneButton.scss\"\n\nexport interface TogglePaneButtonProps {\n  state: State\n  actions: Actions\n}\n\nexport function TogglePaneButton(props: TogglePaneButtonProps) {\n  const { state, actions } = props\n\n  return (\n    <div class=\"hyperapp-devtools toggle-pane-button\">\n      <button onclick={() => actions.showPane(!state.paneShown)}>\n        Devtools\n      </button>\n    </div>\n  )\n}\n","import { h } from \"hyperapp\"\n\nimport { State, Actions, PaneDisplay } from \"./api\"\nimport { DebugPane, TogglePaneButton } from \"./components\"\n\nfunction getClassName(display: PaneDisplay): string {\n  switch (display) {\n    case \"fullscreen\":\n      return \"devtools-overlay\"\n    case \"right\":\n      return \"devtools-overlay align-right\"\n    case \"bottom\":\n      return \"devtools-overlay align-bottom\"\n  }\n}\n\nexport function view(state: State, actions: Actions) {\n  if (state.paneShown) {\n    return (\n      <div class={getClassName(state.paneDisplay)}>\n        {DebugPane({ state, actions })}\n        {TogglePaneButton({ state, actions })}\n      </div>\n    )\n  }\n  return TogglePaneButton({ state, actions })\n}\n","import { State } from \"./api\"\n\nexport const state: State = {\n  runs: [],\n  runsById: {},\n  paneDisplay: \"right\",\n  valueDisplay: \"state\",\n  paneShown: false,\n  selectedEvent: null,\n  collapseRepeatingEvents: true,\n  detailsPaneExpandedPaths: {}\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\n * Path: Array<string | number>\n */\nexport type Path = Array<string | number>\n\n/**\n * Get the value at the given path in the given target, or undefined if path doesn't exists.\n */\nexport function get<T = any, R = any>(target: T, path: Path): R {\n  let result: any = target\n  for (var i = 0; i < path.length; i++) {\n    result = result ? result[path[i]] : result\n  }\n  return result as R\n}\n\n/**\n * Immutable set: set the value at the given path in the given target and returns a new target.\n * Creates the necessary objects/arrays if the path doesn't exist.\n */\nexport function set<T = any, V = any, R = any>(\n  target: T,\n  path: Path,\n  value: V\n): R {\n  if (path.length === 0) {\n    return (value as any) as R\n  }\n  return assign(Array.isArray(target) ? [] : {}, target, {\n    [path[0]]:\n      path.length > 1 ? set(target[path[0]] || {}, path.slice(1), value) : value\n  })\n}\n\n/**\n * Immutable merge: merges the given value and the existing value (if any) at the path in the target using Object.assign() and return a new target.\n * Creates the necessary objects/arrays if the path doesn't exist.\n */\nexport function merge<T = any, V = any, R = any>(\n  target: T,\n  path: Path,\n  value: V\n): R {\n  return set(\n    target,\n    path,\n    assign(Array.isArray(value) ? [] : {}, get(target, path), value)\n  )\n}\n\nfunction assign(target: any, obj: any, obj2: any): any {\n  for (let i in obj) {\n    target[i] = obj[i]\n  }\n  for (let i in obj2) {\n    target[i] = obj2[i]\n  }\n  return target\n}\n","import { StringMap } from \"./api\"\n\nconst FUNCTIONS: StringMap<any> = {}\n\nexport function registerDebuggedFunction(name: string, fn: any) {\n  if (FUNCTIONS[name]) {\n    throw new Error(\n      `There is already a function registered with name \"${name}\".`\n    )\n  }\n\n  FUNCTIONS[name] = fn\n}\n\nexport function isRegistered(name: string): boolean {\n  return !!FUNCTIONS[name]\n}\n\nexport function getRegistered(name: string): any {\n  const result = FUNCTIONS[name]\n  if (!result) throw new Error(`No function registered with name ${name}.`)\n  return result\n}\n","import * as api from \"../api\"\nimport { get } from \"../immutable\"\nimport { getRun } from \"../selectors\"\nimport { getRegistered } from \"../debuggedFunctions\"\n\nfunction executeAction(payload: api.ExecutePayload, state: api.State) {\n  const { runId, name, args } = payload\n\n  const run = getRun(state, runId)\n  const action = get(run.interop, name.split(\".\"))\n\n  if (!action) throw new Error(`No action found with name \"${name}\".`)\n\n  action(args[0])\n}\n\nfunction executeFunction(payload: api.ExecutePayload, state: api.State) {\n  const { name, args } = payload\n\n  const fn = getRegistered(name)\n  fn(...args)\n}\n\nexport const execute = (payload: api.ExecutePayload) => (state: api.State) => {\n  const { type, runId, name, args } = payload\n\n  if (type === \"action\") {\n    executeAction(payload, state)\n  } else {\n    executeFunction(payload, state)\n  }\n}\n","import * as api from \"../api\"\nimport { getLatestRunId } from \"../selectors\"\n\nfunction getEvent(\n  state: api.State,\n  run: api.Run,\n  payload: api.LogCallStartPayload\n): api.AppEvent {\n  const { args, eventId, name, runId, type } = payload\n  if (type === \"action\") {\n    return {\n      type: \"action\",\n      id: eventId,\n      name,\n      data: args && args.length > 0 ? args[0] : undefined,\n      parent: run.currentEvent,\n      children: [],\n      collapsed: false,\n      stateBefore: run.currentState\n    }\n  }\n\n  return {\n    type: \"function\",\n    id: eventId,\n    name,\n    args,\n    children: [],\n    collapsed: false,\n    parent: run.currentEvent\n  }\n}\n\nexport const logCallStart = (payload: api.LogCallStartPayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId = getLatestRunId(state), eventId } = payload\n  const runsById = { ...state.runsById }\n  const run = { ...runsById[runId] }\n  runsById[runId] = run\n  run.eventsById[eventId] = getEvent(state, run, payload)\n  const parentId = run.currentEvent\n  if (parentId) {\n    // append the event to the parent\n    const parent = { ...run.eventsById[parentId] }\n    run.eventsById[parentId] = parent\n    parent.children = parent.children.concat(eventId)\n  } else {\n    // append the event to the run\n    run.events = run.events.concat(eventId)\n  }\n  run.currentEvent = eventId\n\n  return { runsById }\n}\n","import { h } from \"hyperapp\"\n\nimport { guid } from \"./utils\"\nimport { view } from \"./view\"\nimport { state } from \"./state\"\nimport { Actions } from \"./api\"\nimport * as actions from \"./actions\"\nimport enhanceActions from \"./enhanceActions\"\nimport { injectedSetState } from \"./api\"\n\n// Rewrite the view more permissive than HA to allow for multiple VNode implementations.\n// e.g. the one in HA 1.1.2 and the on in HA 1.2.5\nexport interface View {\n  (state: any, actions: any): any\n}\n\nexport interface HypperApp {\n  (state: any, actions: any, view: View, container: Element | null): any\n}\n\nlet devtoolsApp: Actions\n\nexport function getDevtoolsApp() {\n  return devtoolsApp\n}\n\nexport function devtools<App extends HypperApp>(app: App): App {\n  const div = document.createElement(\"div\")\n  document.body.appendChild(div)\n\n  devtoolsApp = app(state, actions, view, div)\n\n  return <App>function(state: any, actions: any, view, element) {\n    const runId = guid()\n\n    actions[injectedSetState] = function timeTravel(state) {\n      return state\n    }\n    actions = enhanceActions(devtoolsApp, runId, actions)\n\n    const interop: any = app(state, actions, view, element)\n\n    devtoolsApp.logInit({\n      runId,\n      state,\n      timestamp: new Date().getTime(),\n      interop\n    })\n\n    return interop\n  }\n}\nexport default devtools\n","export interface StringMap<V> {\n  [key: string]: V\n}\n\nexport type EventType = \"function\" | \"action\" | \"init\" | \"message\"\n\nexport type AppEvent = InitEvent | ActionEvent | FunctionEvent | MessageEvent\n\nexport interface BaseEvent {\n  id: string\n  type: EventType\n  name: string\n  children?: string[]\n  collapsed?: boolean\n  parent?: string\n}\n\nexport interface InitEvent extends BaseEvent {\n  type: \"init\"\n  state: any\n}\n\nexport interface ActionEvent extends BaseEvent {\n  type: \"action\"\n  data: any\n  result?: any\n  error?: any\n  stateBefore: any\n  stateAfter?: any\n}\n\nexport interface FunctionEvent extends BaseEvent {\n  type: \"function\"\n  args: any[]\n  result?: any\n  error?: any\n  returnedBy?: string\n}\n\nexport type LogLevel = \"info\" | \"warn\" | \"error\"\n\nexport interface MessageEvent extends BaseEvent {\n  type: \"message\"\n  level: LogLevel\n  message: any\n}\n\nexport interface Run {\n  id: string\n  events: string[]\n  eventsById: StringMap<AppEvent>\n  timestamp: number\n  collapsed: boolean\n  currentEvent?: string\n  currentState?: any\n  interop: any\n}\n\nexport interface SelectedEvent {\n  runId: string\n  eventId: string\n}\n\nexport type PaneDisplay = \"fullscreen\" | \"right\" | \"bottom\"\n\nexport type ValueDisplay =\n  | \"state\"\n  | \"result\"\n  | \"args\"\n  | \"message\"\n  | \"data\"\n  | \"debugger-state\"\n\nexport interface State {\n  runs: string[]\n  runsById: StringMap<Run>\n  selectedEvent: SelectedEvent | null\n  collapseRepeatingEvents: boolean\n  valueDisplay: ValueDisplay\n  detailsPaneExpandedPaths: StringMap<boolean>\n  paneDisplay: PaneDisplay\n  paneShown: boolean\n}\n\n// # Actions\n\nexport interface LogInitPayload {\n  runId: string\n  timestamp: number\n  state: any\n  interop: any\n}\n\nexport interface LogMessagePayload {\n  runId: string\n  eventId: string\n  level: LogLevel\n  message: any\n}\n\nexport interface LogCallStartPayload {\n  // use latest if not set.\n  runId?: string\n  eventId: string\n  type: \"function\" | \"action\"\n  name: string\n  args: any[]\n}\n\nexport interface LogCallEndPayload {\n  runId?: string\n  eventId: string\n  result?: any\n  error?: any\n}\n\nexport interface ToggleEventPayload {\n  runId: string\n  eventId: string\n}\n\nexport interface SetDetailsPaneExpandedPayload {\n  path: string\n  expanded: boolean\n}\n\nexport interface ExecutePayload {\n  type: \"function\" | \"action\"\n  runId: string\n  name: string\n  args: any[]\n}\n\nexport interface Actions {\n  logInit(payload: LogInitPayload)\n  logMessage(payload: LogMessagePayload)\n  logCallStart(payload: LogCallStartPayload)\n  logCallEnd(payload: LogCallEndPayload)\n  toggleRun(run: string)\n  toggleEvent(payload: ToggleEventPayload)\n  toggleCollapseRepeatingEvents()\n  setDetailsPaneExpanded(payload: SetDetailsPaneExpandedPayload)\n  showPane(shown: boolean)\n  setPaneDisplay(paneDisplay: PaneDisplay)\n  setValueDisplay(valueDisplay: ValueDisplay)\n  select(action: SelectedEvent | null)\n  timeTravel(action: SelectedEvent)\n  execute(payload: ExecutePayload)\n  deleteRun(id: string)\n}\n\nexport const injectedSetState = \"$__SET_STATE\"\n","import * as api from \"../api\"\n\nexport const deleteRun = (id: string) => (\n  state: api.State\n): Partial<api.State> => {\n  const runsById = { ...state.runsById }\n  delete runsById[id]\n  const runs = state.runs.filter(s => s !== id)\n  return { runs, runsById }\n}\n","import * as api from \"../api\"\nimport { merge } from \"../immutable\"\nimport { getLatestRunId } from \"../selectors\"\nimport { sanitizeValueDisplay } from \"../valueDisplay\"\n\nexport const logCallEnd = (payload: api.LogCallEndPayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId = getLatestRunId(state), eventId, result, error } = payload\n\n  const runsById = { ...state.runsById }\n  const run = { ...runsById[runId] }\n  runsById[runId] = run\n\n  run.eventsById = { ...run.eventsById }\n  const event = { ...run.eventsById[eventId] }\n  run.eventsById[eventId] = event\n  let valueDisplay = state.valueDisplay\n  // update the event\n  if (event.type === \"action\" || event.type === \"function\") {\n    if (result) {\n      event.result = result\n\n      if (event.type === \"action\" && !result.then) {\n        // update the run's current state\n        const path = event.name.split(\".\")\n        path.pop()\n        const stateAfter = merge(event.stateBefore, path, event.result)\n        event.stateAfter = stateAfter\n        run.currentState = stateAfter\n      }\n    }\n    if (error) {\n      event.error = error\n    }\n  }\n\n  // update the current event of the run\n  run.currentEvent =\n    eventId === run.currentEvent ? event.parent : run.currentEvent\n\n  const selectedEvent: api.SelectedEvent = {\n    runId: run.id,\n    eventId\n  }\n\n  valueDisplay = sanitizeValueDisplay(valueDisplay, event)\n\n  return { runsById, selectedEvent, valueDisplay }\n}\n","import * as api from \"../api\"\n\nexport const logInit = (payload: api.LogInitPayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId, interop, timestamp } = payload\n  const runs = state.runs.concat(runId)\n  const runsById = { ...state.runsById }\n  const initEvent: api.InitEvent = {\n    id: runId,\n    type: \"init\",\n    name: \"Initial State\",\n    state: payload.state\n  }\n  runsById[runId] = {\n    id: runId,\n    events: [runId],\n    eventsById: { [runId]: initEvent },\n    currentState: payload.state,\n    timestamp,\n    interop,\n    collapsed: false\n  }\n  return {\n    runs,\n    runsById,\n    selectedEvent: {\n      runId,\n      eventId: runId\n    }\n  }\n}\n","import * as api from \"../api\"\n\nexport const logMessage = (payload: api.LogMessagePayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId, eventId, level, message } = payload\n\n  const runsById = { ...state.runsById }\n  const run = { ...runsById[runId] }\n  runsById[runId] = run\n  run.events = run.events.concat(eventId)\n  run.eventsById = {\n    ...run.eventsById,\n    [eventId]: {\n      type: \"message\",\n      level,\n      message,\n      name: level,\n      id: eventId,\n      parent: run.currentEvent\n    }\n  }\n\n  return {\n    runsById,\n    selectedEvent: {\n      runId,\n      eventId\n    }\n  }\n}\n","import * as api from \"../api\"\nimport { getSelectedEvent } from \"../selectors\"\nimport { sanitizeValueDisplay } from \"../valueDisplay\"\n\nexport const select = (selectedEvent: api.SelectedEvent | null) => (\n  state: api.State\n): Partial<api.State> => {\n  const event = getSelectedEvent(state, selectedEvent)\n  return {\n    selectedEvent,\n    valueDisplay: sanitizeValueDisplay(state.valueDisplay, event)\n  }\n}\n","import * as api from \"../api\"\nimport { set } from \"../immutable\"\n\nexport const setDetailsPaneExpanded = (\n  payload: api.SetDetailsPaneExpandedPayload\n) => (state: api.State): Partial<api.State> => {\n  const { path, expanded } = payload\n  return {\n    detailsPaneExpandedPaths: {\n      ...state.detailsPaneExpandedPaths,\n      [path]: expanded\n    }\n  }\n}\n","import * as api from \"../api\"\n\nexport const setPaneDisplay = (paneDisplay: api.PaneDisplay) => (\n  state: api.State\n): Partial<api.State> => ({\n  paneDisplay\n})\n","import * as api from \"../api\"\n\nexport const setValueDisplay = (valueDisplay: api.ValueDisplay) => (\n  state: api.State\n): Partial<api.State> => ({\n  valueDisplay\n})\n","import * as api from \"../api\"\n\nexport const showPane = (paneShown: boolean) => (\n  state: api.State\n): Partial<api.State> => ({\n  paneShown\n})\n","import * as api from \"../api\"\nimport { getSelectedEvent, getRun } from \"../selectors\"\n\nexport const timeTravel = (selectedEvent: api.SelectedEvent) => (\n  state: api.State\n) => {\n  const run = getRun(state, selectedEvent.runId)\n  if (!run) {\n    return\n  }\n\n  const event = getSelectedEvent(state, selectedEvent)\n  if (event) {\n    if (event.type === \"action\" && event.stateAfter) {\n      run.interop[api.injectedSetState](event.stateAfter)\n      return\n    }\n    if (event.type === \"init\") {\n      run.interop[api.injectedSetState](event.state)\n    }\n  }\n}\n","import * as api from \"../api\"\n\nexport const toggleCollapseRepeatingEvents = () => (\n  state: api.State\n): Partial<api.State> => ({\n  collapseRepeatingEvents: !state.collapseRepeatingEvents\n})\n","import * as api from \"../api\"\nimport { get, set } from \"../immutable\"\n\nexport const toggleEvent = (payload: api.ToggleEventPayload) => (\n  state: api.State\n): Partial<api.State> => {\n  const { runId, eventId } = payload\n\n  // const collapsed = state.runsById[runId].eventsById[eventId].collapsed\n  const collapsed = get(state.runsById, [\n    runId,\n    \"eventsById\",\n    eventId,\n    \"collapsed\"\n  ])\n  // state.runsById[runId].eventsById[eventId].collapsed = !collapsed\n  return {\n    runsById: set(\n      state.runsById,\n      [runId, \"eventsById\", eventId, \"collapsed\"],\n      !collapsed\n    )\n  }\n}\n","import * as api from \"../api\"\n\nexport const toggleRun = (id: string) => (state: api.State) => {\n  const runsById = { ...state.runsById }\n  runsById[id] = { ...runsById[id], collapsed: !runsById[id].collapsed }\n  return { runsById }\n}\n","import { StringMap } from \"./api\"\nimport { getDevtoolsApp } from \"./devtools\"\nimport { guid } from \"./utils\"\nimport { registerDebuggedFunction } from \"./debuggedFunctions\"\n\nfunction debugWithoutRegistering<T extends Function = any>(\n  val: T,\n  name: string = \"(anonymous function)\"\n): T {\n  return <any>function(...args) {\n    const actions = getDevtoolsApp()\n    const eventId = guid()\n    if (actions) {\n      actions.logCallStart({\n        type: \"function\",\n        eventId,\n        name,\n        args\n      })\n    }\n\n    try {\n      const result = (<any>val)(...args)\n\n      if (actions) {\n        actions.logCallEnd({\n          eventId,\n          result\n        })\n      }\n\n      if (typeof result === \"function\") {\n        return debugWithoutRegistering(result)\n      }\n\n      return result\n    } catch (error) {\n      if (actions) {\n        actions.logCallEnd({\n          eventId,\n          error\n        })\n      }\n\n      throw error\n    }\n  }\n}\n\nexport function debug<T extends Function = any>(\n  nameOrValue: T | string,\n  value?: T\n): T {\n  const val = typeof nameOrValue === \"string\" ? value : nameOrValue\n  const name = typeof nameOrValue === \"string\" ? nameOrValue : nameOrValue.name\n  if (!name) {\n    throw new Error(\n      `Please provide a unique name: debug(\"myFn\", () => { ... } or use a named function.`\n    )\n  }\n\n  if (typeof val !== \"function\") {\n    throw new Error(`Can only debug a function but got ${typeof val}.`)\n  }\n\n  registerDebuggedFunction(name, val)\n\n  return debugWithoutRegistering(val, name)\n}\n","import { Actions } from \"./api\"\nimport { guid } from \"./utils\"\n\nexport function enhanceActions(\n  hoaActions: Actions,\n  runId: string,\n  actions: any,\n  prefix?: string\n): any {\n  const result = {}\n\n  const namespace = prefix ? prefix + \".\" : \"\"\n  Object.keys(actions || {}).forEach(name => {\n    var action = actions[name]\n    if (!action) {\n      result[name] = null\n      return\n    }\n\n    const fnName = action.name || name\n    const namedspacedName = namespace + fnName\n    if (typeof action === \"function\") {\n      result[name] = function(data) {\n        return function(state, actions) {\n          const eventId = guid()\n          hoaActions.logCallStart({\n            type: \"action\",\n            name: namedspacedName,\n            args: [data],\n            eventId,\n            runId\n          })\n          try {\n            let result = action(data)\n            result =\n              typeof result === \"function\" ? result(state, actions) : result\n\n            hoaActions.logCallEnd({\n              runId,\n              eventId,\n              result\n            })\n\n            return result\n          } catch (error) {\n            hoaActions.logCallEnd({\n              runId,\n              eventId,\n              error\n            })\n\n            throw error\n          }\n        }\n      }\n    } else {\n      result[name] = enhanceActions(hoaActions, runId, action, namedspacedName)\n    }\n  })\n\n  return result\n}\n\nexport default enhanceActions\n"],"names":["ALPHABET","rand","Math","floor","random","length","guid","Array","apply","map","join","h","name","attributes","rest","children","arguments","push","node","pop","nodeName","key","styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","state","runs","Error","runId","run","runsById","event","selectedEvent","eventsById","eventId","getLatestRunId","getSelectedEvent","stateAfter","currentState","ALLOWED_VALUE_DISPLAY","action","result","data","debugger-state","function","args","init","message","VALUE_DISPLAYS","DEFAULT_VALUE_DISPLAYS","valueDisplay","LABELS","props","actions","class","id","checked","collapseRepeatingEvents","onchange","toggleCollapseRepeatingEvents","for","e","setValueDisplay","target","value","d","transform","xmlns","width","height","viewBox","onclick","CaretRight","Svg","CaretBottom","Cross","Empty","isArray","Wrap","Pair","classList","Switch","path","expanded","Expand","Collapse","i","Arr","keys","Object","Obj","detailsPaneExpandedPaths","split","setDetailsPaneExpanded","error","stack","Pane","PaneArgs","PaneData","ErrorPane","PaneResult","PaneMessage","PaneState","MAX_LENGTH","arg","constructor","JSON","stringify","substring","events","indexInList","href","selected","isSelectedEvent","preventDefault","select","Icon","stopPropagation","toggleEvent","collapsed","ToggleEvent","level","getEventClass","getArgumentsText","maxLength","substr","getDisplayName","index","previous","getRepeatText","nextEvent","EventLink","RunEventList","reverse","items","lastId","forEach","date","unshift","current","Date","timestamp","toLocaleTimeString","paneDisplay","setPaneDisplay","timeTravel","disabled","canTravelToSelectedEvent","showPane","DebuggerOptions","RunsPane","ObjectDetailsPane","paneShown","display","getClassName","DebugPane","TogglePaneButton","__assign","assign","t","s","n","p","prototype","hasOwnProperty","call","set","slice","obj","obj2","FUNCTIONS","payload","getRegistered","devtoolsApp","injectedSetState","filter","get","getRun","interop","executeAction","executeFunction","_a","then","stateBefore","currentEvent","parent","sanitizeValueDisplay","undefined","parentId","parent_1","concat","initEvent","api.injectedSetState","val","_i","logCallStart","logCallEnd","debugWithoutRegistering","app","div","body","view","element","hoaActions","prefix","namespace","fnName","namedspacedName","result_1","enhanceActions","logInit","getTime","nameOrValue","fn","registerDebuggedFunction"],"mappings":"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"}